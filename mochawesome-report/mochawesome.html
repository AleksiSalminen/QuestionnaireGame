<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:46,&quot;tests&quot;:252,&quot;passes&quot;:252,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2019-12-23T19:46:05.768Z&quot;,&quot;end&quot;:&quot;2019-12-23T19:46:34.032Z&quot;,&quot;duration&quot;:28264,&quot;testsRegistered&quot;:252,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;ed2e837c-45eb-40c8-8d1c-bfbe52a62348&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook: Global Before All&quot;,&quot;fullTitle&quot;:&quot;\&quot;before all\&quot; hook: Global Before All&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const clearDb = async () =&gt; {\n    for (const i in mongoose.connection.collections) {\n        await mongoose.connection.collections[i].deleteMany({});\n    }\nif (mongoose.connection.readyState === 0) {\n    await mongoose\n        .connect(`mongodb://${dbConfig.host}:${dbConfig.port}/${dbConfig.db}`, {\n            useNewUrlParser: true,\n            useUnifiedTopology: true,\n            useFindAndModify: false,\n            useCreateIndex: true\n        });\n    mongoose.connection.on(&#x27;error&#x27;, (err) =&gt; {\n        console.error(err);\n    });\n    mongoose.connection.on(&#x27;reconnectFailed&#x27;, (err) =&gt; {\n        throw err;\n    });\n\n    return await clearDb();\n} else {\n    return await clearDb();\n}\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;72559c35-ffdd-432b-ac9b-ca2648147d1a&quot;,&quot;parentUUID&quot;:&quot;ed2e837c-45eb-40c8-8d1c-bfbe52a62348&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook: Global After All&quot;,&quot;fullTitle&quot;:&quot;\&quot;after all\&quot; hook: Global After All&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;mongoose.disconnect();\ndone();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1766615-c3ae-44d6-aa5b-86e1bc3037db&quot;,&quot;parentUUID&quot;:&quot;ed2e837c-45eb-40c8-8d1c-bfbe52a62348&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b456c80f-80d2-4998-a16b-8908ac9cda77&quot;,&quot;title&quot;:&quot;Create Questionnaire&quot;,&quot;fullFile&quot;:&quot;/bwa/test/assignment/createQuestionnaire.test.js&quot;,&quot;file&quot;:&quot;/test/assignment/createQuestionnaire.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Create Questionnaire \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:656,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    User.deleteMany({});\n    const admin = new User(adminData);\n    admin.save();\n    const teacher = new User(teacherData);\n    teacher.save();\n    const student = new User(studentData);\n    student.save();\n}\ncatch (err) {\n  // eslint-disable-next-line no-console\n  console.log(err);\n  throw err;\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;55fb8b7e-b931-487d-9899-07b187ba161e&quot;,&quot;parentUUID&quot;:&quot;b456c80f-80d2-4998-a16b-8908ac9cda77&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Create Questionnaire \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;adminUser\n    .post(&#x27;/users/login&#x27;)\n    .send(adminCredentials)\n    .end(function (err, response) {\n        if (err) return done(err);\n        expect(response.statusCode).to.equal(302);\n        expect(&#x27;Location&#x27;, &#x27;/users/me&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8a45a59-23d2-4a75-975c-6a2c6b7e0d72&quot;,&quot;parentUUID&quot;:&quot;b456c80f-80d2-4998-a16b-8908ac9cda77&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Create Questionnaire \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;teacherUser\n    .post(&#x27;/users/login&#x27;)\n    .send(teacherCredentials)\n    .end(function (err, response) {\n        if (err) return done(err);\n        expect(response.statusCode).to.equal(302);\n        expect(&#x27;Location&#x27;, &#x27;/users/me&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd1b9b18-7218-4e47-bb73-5fea2417930a&quot;,&quot;parentUUID&quot;:&quot;b456c80f-80d2-4998-a16b-8908ac9cda77&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Create Questionnaire \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;studentUser\n    .post(&#x27;/users/login&#x27;)\n    .send(studentCredentials)\n    .end(function (err, response) {\n        if (err) return done(err);\n        expect(response.statusCode).to.equal(302);\n        expect(&#x27;Location&#x27;, &#x27;/users/me&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a679281-a3e1-4605-b19e-ceab31411c97&quot;,&quot;parentUUID&quot;:&quot;b456c80f-80d2-4998-a16b-8908ac9cda77&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Create Questionnaire \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Questionnaire.deleteMany({});\nlet questionnaire = new Questionnaire(questionnaireData);\nawait questionnaire.save();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;610d503a-d2a0-496a-a775-f33e6c58f88c&quot;,&quot;parentUUID&quot;:&quot;b456c80f-80d2-4998-a16b-8908ac9cda77&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ced0a3c2-eb96-4059-b4ff-5847bdd83aaa&quot;,&quot;title&quot;:&quot;Questionnaire creation authorization&quot;,&quot;fullFile&quot;:&quot;/bwa/test/assignment/createQuestionnaire.test.js&quot;,&quot;file&quot;:&quot;/test/assignment/createQuestionnaire.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;must let an admin to create new questionnaires&quot;,&quot;fullTitle&quot;:&quot;Create Questionnaire Questionnaire creation authorization must let an admin to create new questionnaires&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const rawData = fs.readFileSync(fPath + &#x27;/adminQuestionnaire.json&#x27;, &#x27;utf8&#x27;);\nsendToServer(rawData, 200, 200, adminUser, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b4810e0c-e5fe-4b8c-b9ed-0252f6ecef44&quot;,&quot;parentUUID&quot;:&quot;ced0a3c2-eb96-4059-b4ff-5847bdd83aaa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must let a teacher to create new questionnaires&quot;,&quot;fullTitle&quot;:&quot;Create Questionnaire Questionnaire creation authorization must let a teacher to create new questionnaires&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:160,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const rawData = fs.readFileSync(fPath + &#x27;/teacherQuestionnaire.json&#x27;, &#x27;utf8&#x27;);\nsendToServer(rawData, 200, 200, teacherUser, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;220a2781-d55f-4689-a1b6-9f36e106ecb3&quot;,&quot;parentUUID&quot;:&quot;ced0a3c2-eb96-4059-b4ff-5847bdd83aaa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must NOT let a student to create new questionnaires&quot;,&quot;fullTitle&quot;:&quot;Create Questionnaire Questionnaire creation authorization must NOT let a student to create new questionnaires&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const rawData = fs.readFileSync(fPath + &#x27;/studentQuestionnaire.json&#x27;, &#x27;utf8&#x27;);\nsendToServer(rawData, 302, 302, studentUser, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9b41d9b-0b98-4082-879a-cf952cd2c749&quot;,&quot;parentUUID&quot;:&quot;ced0a3c2-eb96-4059-b4ff-5847bdd83aaa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must NOT let a non-logged-in user to edit questionnaires&quot;,&quot;fullTitle&quot;:&quot;Create Questionnaire Questionnaire creation authorization must NOT let a non-logged-in user to edit questionnaires&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const rawData = fs.readFileSync(fPath + &#x27;/studentQuestionnaire.json&#x27;, &#x27;utf8&#x27;);\nsendToServer(rawData, 302, 302, unauthorizedUser, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3fb1e343-1750-48c7-aaab-ea7675259692&quot;,&quot;parentUUID&quot;:&quot;ced0a3c2-eb96-4059-b4ff-5847bdd83aaa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must require a valid csrf token&quot;,&quot;fullTitle&quot;:&quot;Create Questionnaire Questionnaire creation authorization must require a valid csrf token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:44,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const rawData = fs.readFileSync(fPath + &#x27;/emptyTitle.json&#x27;, &#x27;utf8&#x27;);\nconst csrfToken = &#x27;\&quot; \&quot;&#x27;;\nconst data = rawData + csrfToken + &#x27; }&#x27;;\nadminUser.post(&#x27;/questionnaires/new&#x27;)\n    .send(JSON.parse(data))\n    .end(function (err, res) {\n        if (err) return done(err);\n        expect(res.statusCode).to.equal(403);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46177407-1716-409f-bc91-e1bb3dd1bbaa&quot;,&quot;parentUUID&quot;:&quot;ced0a3c2-eb96-4059-b4ff-5847bdd83aaa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b4810e0c-e5fe-4b8c-b9ed-0252f6ecef44&quot;,&quot;220a2781-d55f-4689-a1b6-9f36e106ecb3&quot;,&quot;c9b41d9b-0b98-4082-879a-cf952cd2c749&quot;,&quot;3fb1e343-1750-48c7-aaab-ea7675259692&quot;,&quot;46177407-1716-409f-bc91-e1bb3dd1bbaa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:560,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;9ede534e-c204-4bb0-a7f8-0d5782422891&quot;,&quot;title&quot;:&quot;New questionnaire validation&quot;,&quot;fullFile&quot;:&quot;/bwa/test/assignment/createQuestionnaire.test.js&quot;,&quot;file&quot;:&quot;/test/assignment/createQuestionnaire.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;must be able to handle an empty questionnaire&quot;,&quot;fullTitle&quot;:&quot;Create Questionnaire New questionnaire validation must be able to handle an empty questionnaire&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:128,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;emptyQuestionnaire.json&#x27;;\nvalidationSend(file, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;afe1d7ca-15de-4fc3-85ef-34fde1480824&quot;,&quot;parentUUID&quot;:&quot;9ede534e-c204-4bb0-a7f8-0d5782422891&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must be able to handle an empty title&quot;,&quot;fullTitle&quot;:&quot;Create Questionnaire New questionnaire validation must be able to handle an empty title&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:162,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;emptyTitle.json&#x27;;\nvalidationSend(file, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1fd37765-6a33-4199-ae87-ec27d5e30598&quot;,&quot;parentUUID&quot;:&quot;9ede534e-c204-4bb0-a7f8-0d5782422891&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must be able to handle a too long title&quot;,&quot;fullTitle&quot;:&quot;Create Questionnaire New questionnaire validation must be able to handle a too long title&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:113,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;tooLongTitle.json&#x27;;\nvalidationSend(file, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8b939619-3e44-4953-9911-93f85fef491e&quot;,&quot;parentUUID&quot;:&quot;9ede534e-c204-4bb0-a7f8-0d5782422891&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must be able to handle a duplicate title&quot;,&quot;fullTitle&quot;:&quot;Create Questionnaire New questionnaire validation must be able to handle a duplicate title&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:124,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;duplicateTitle.json&#x27;;\nvalidationSend(file, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5526dc85-2c95-4c1e-9941-5b33b0220b3b&quot;,&quot;parentUUID&quot;:&quot;9ede534e-c204-4bb0-a7f8-0d5782422891&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must be able to handle incorrect submissions number&quot;,&quot;fullTitle&quot;:&quot;Create Questionnaire New questionnaire validation must be able to handle incorrect submissions number&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:148,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;incorrectSubmissions.json&#x27;;\nvalidationSend(file, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0253d60d-dd3e-4055-8052-fe79f087d38b&quot;,&quot;parentUUID&quot;:&quot;9ede534e-c204-4bb0-a7f8-0d5782422891&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must be able to handle a no questions situation&quot;,&quot;fullTitle&quot;:&quot;Create Questionnaire New questionnaire validation must be able to handle a no questions situation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:105,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;noQuestions.json&#x27;;\nvalidationSend(file, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be438175-2630-449a-8262-b9c883e5cf0d&quot;,&quot;parentUUID&quot;:&quot;9ede534e-c204-4bb0-a7f8-0d5782422891&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must be able to handle a duplicate questions title&quot;,&quot;fullTitle&quot;:&quot;Create Questionnaire New questionnaire validation must be able to handle a duplicate questions title&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:111,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;duplicateQuestions.json&#x27;;\nvalidationSend(file, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fcb2f333-d3a0-4ac0-a8db-ab71e7918c57&quot;,&quot;parentUUID&quot;:&quot;9ede534e-c204-4bb0-a7f8-0d5782422891&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must be able to handle a no options situation&quot;,&quot;fullTitle&quot;:&quot;Create Questionnaire New questionnaire validation must be able to handle a no options situation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:131,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;noOptions.json&#x27;;\nvalidationSend(file, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d30054a-3883-4ca9-abe8-ed0f1d3534d2&quot;,&quot;parentUUID&quot;:&quot;9ede534e-c204-4bb0-a7f8-0d5782422891&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must be able to handle incorrect number of options&quot;,&quot;fullTitle&quot;:&quot;Create Questionnaire New questionnaire validation must be able to handle incorrect number of options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:152,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;incorrectNumberOfOptions.json&#x27;;\nvalidationSend(file, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9827aa3-79d9-4c3d-8415-90f30f177f5f&quot;,&quot;parentUUID&quot;:&quot;9ede534e-c204-4bb0-a7f8-0d5782422891&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must be able to handle duplicate options&quot;,&quot;fullTitle&quot;:&quot;Create Questionnaire New questionnaire validation must be able to handle duplicate options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:129,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;duplicateOptions.json&#x27;;\nvalidationSend(file, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f6e34009-700f-4235-8afa-6e168676d57e&quot;,&quot;parentUUID&quot;:&quot;9ede534e-c204-4bb0-a7f8-0d5782422891&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must be able to handle \&quot;true\&quot; options missing&quot;,&quot;fullTitle&quot;:&quot;Create Questionnaire New questionnaire validation must be able to handle \&quot;true\&quot; options missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:137,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;trueOptionsMissing.json&#x27;;\nvalidationSend(file, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;426eb0e2-58c3-4005-a0ef-29eea07b14af&quot;,&quot;parentUUID&quot;:&quot;9ede534e-c204-4bb0-a7f8-0d5782422891&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must be able to handle incorrect max points&quot;,&quot;fullTitle&quot;:&quot;Create Questionnaire New questionnaire validation must be able to handle incorrect max points&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:137,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;incorrectMaxPoints.json&#x27;;\nvalidationSend(file, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89055939-713c-4c1b-8f86-d9455593aade&quot;,&quot;parentUUID&quot;:&quot;9ede534e-c204-4bb0-a7f8-0d5782422891&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must be able to handle xss&quot;,&quot;fullTitle&quot;:&quot;Create Questionnaire New questionnaire validation must be able to handle xss&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:114,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;xss.json&#x27;;\nvalidationSendMore(file, 200, 200, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1674c912-cffa-4b0e-bd7e-fa1a291bf128&quot;,&quot;parentUUID&quot;:&quot;9ede534e-c204-4bb0-a7f8-0d5782422891&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;afe1d7ca-15de-4fc3-85ef-34fde1480824&quot;,&quot;1fd37765-6a33-4199-ae87-ec27d5e30598&quot;,&quot;8b939619-3e44-4953-9911-93f85fef491e&quot;,&quot;5526dc85-2c95-4c1e-9941-5b33b0220b3b&quot;,&quot;0253d60d-dd3e-4055-8052-fe79f087d38b&quot;,&quot;be438175-2630-449a-8262-b9c883e5cf0d&quot;,&quot;fcb2f333-d3a0-4ac0-a8db-ab71e7918c57&quot;,&quot;0d30054a-3883-4ca9-abe8-ed0f1d3534d2&quot;,&quot;b9827aa3-79d9-4c3d-8415-90f30f177f5f&quot;,&quot;f6e34009-700f-4235-8afa-6e168676d57e&quot;,&quot;426eb0e2-58c3-4005-a0ef-29eea07b14af&quot;,&quot;89055939-713c-4c1b-8f86-d9455593aade&quot;,&quot;1674c912-cffa-4b0e-bd7e-fa1a291bf128&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1691,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;63c77637-7a80-4462-ab30-b01bea397047&quot;,&quot;title&quot;:&quot;Delete Questionnaire&quot;,&quot;fullFile&quot;:&quot;/bwa/test/assignment/deleteQuestionnaire.test.js&quot;,&quot;file&quot;:&quot;/test/assignment/deleteQuestionnaire.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Delete Questionnaire \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:605,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await User.deleteMany({});\n    const admin = new User(adminData);\n    await admin.save();\n    const teacher = new User(teacherData);\n    await teacher.save();\n    const student = new User(studentData);\n    await student.save();\n}\ncatch (err) {\n  // eslint-disable-next-line no-console\n  console.log(err);\n  throw err;\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3dbf2186-d3ce-4e15-a3f5-095c1b9946cd&quot;,&quot;parentUUID&quot;:&quot;63c77637-7a80-4462-ab30-b01bea397047&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Delete Questionnaire \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;adminUser\n    .post(&#x27;/users/login&#x27;)\n    .send(adminCredentials)\n    .end(function (err, response) {\n        if (err) return done(err);\n        expect(response.statusCode).to.equal(302);\n        expect(&#x27;Location&#x27;, &#x27;/users/me&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;740aab42-50be-4a16-beee-2411e6ade429&quot;,&quot;parentUUID&quot;:&quot;63c77637-7a80-4462-ab30-b01bea397047&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Delete Questionnaire \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;teacherUser\n    .post(&#x27;/users/login&#x27;)\n    .send(teacherCredentials)\n    .end(function (err, response) {\n        if (err) return done(err);\n        expect(response.statusCode).to.equal(302);\n        expect(&#x27;Location&#x27;, &#x27;/users/me&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c67d289e-3608-43d5-9095-af3e93bd1f39&quot;,&quot;parentUUID&quot;:&quot;63c77637-7a80-4462-ab30-b01bea397047&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Delete Questionnaire \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;studentUser\n    .post(&#x27;/users/login&#x27;)\n    .send(studentCredentials)\n    .end(function (err, response) {\n        if (err) return done(err);\n        expect(response.statusCode).to.equal(302);\n        expect(&#x27;Location&#x27;, &#x27;/users/me&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd813fe8-4d3c-4204-a19d-8c57860f788c&quot;,&quot;parentUUID&quot;:&quot;63c77637-7a80-4462-ab30-b01bea397047&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Delete Questionnaire \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Questionnaire.deleteMany({});\nlet questionnaire = new Questionnaire(questionnaireData);\nawait questionnaire.save();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad2879ed-c497-4107-b966-029136a9154e&quot;,&quot;parentUUID&quot;:&quot;63c77637-7a80-4462-ab30-b01bea397047&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0d632455-021b-4c99-94ac-5627ac4c0bc1&quot;,&quot;title&quot;:&quot;Questionnaire deletion authorization&quot;,&quot;fullFile&quot;:&quot;/bwa/test/assignment/deleteQuestionnaire.test.js&quot;,&quot;file&quot;:&quot;/test/assignment/deleteQuestionnaire.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;must let an admin to delete questionnaires&quot;,&quot;fullTitle&quot;:&quot;Delete Questionnaire Questionnaire deletion authorization must let an admin to delete questionnaires&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:108,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendToServerDelete(200, 200, adminUser, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;699087d7-8bd0-4b11-b9e6-4987c0265f97&quot;,&quot;parentUUID&quot;:&quot;0d632455-021b-4c99-94ac-5627ac4c0bc1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must let a teacher to delete questionnaires&quot;,&quot;fullTitle&quot;:&quot;Delete Questionnaire Questionnaire deletion authorization must let a teacher to delete questionnaires&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:107,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendToServerDelete(200, 200, teacherUser, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;746a74d4-5990-45b8-8ff7-25880c649dd0&quot;,&quot;parentUUID&quot;:&quot;0d632455-021b-4c99-94ac-5627ac4c0bc1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must NOT let a student to delete questionnaires&quot;,&quot;fullTitle&quot;:&quot;Delete Questionnaire Questionnaire deletion authorization must NOT let a student to delete questionnaires&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendToServerDelete(302, 302, studentUser, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1904003-e19e-4a65-9e02-ee304fa85ffc&quot;,&quot;parentUUID&quot;:&quot;0d632455-021b-4c99-94ac-5627ac4c0bc1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must NOT let a not-logged-in person to delete questionnaires&quot;,&quot;fullTitle&quot;:&quot;Delete Questionnaire Questionnaire deletion authorization must NOT let a not-logged-in person to delete questionnaires&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendToServerDelete(302, 302, unauthorizedUser, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;052996ae-87d5-4816-ac57-3169d4c42e17&quot;,&quot;parentUUID&quot;:&quot;0d632455-021b-4c99-94ac-5627ac4c0bc1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must require a valid csrf token&quot;,&quot;fullTitle&quot;:&quot;Delete Questionnaire Questionnaire deletion authorization must require a valid csrf token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:49,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const csrfToken = &#x27;\&quot; \&quot;&#x27;;\nconst rawData = fs.readFileSync(fPath + &#x27;adminQuestionnaire.json&#x27;, &#x27;utf8&#x27;);\nconst data = rawData + csrfToken + &#x27; }&#x27;;\nlet id = Questionnaire.find({title: questionnaireData.title}).select(&#x27;_id&#x27;).exec( (err, id) =&gt; {\n    id = id[0]._id;\n    adminUser.post(&#x27;/questionnaires/edit/&#x27; + id)\n        .send(JSON.parse(data))\n        .end(function (err, res) {\n            if (err) return done(err);\n            expect(res.statusCode).to.equal(403);\n            done();\n        });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b931849-dca1-4d91-a63c-6876673aea10&quot;,&quot;parentUUID&quot;:&quot;0d632455-021b-4c99-94ac-5627ac4c0bc1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;699087d7-8bd0-4b11-b9e6-4987c0265f97&quot;,&quot;746a74d4-5990-45b8-8ff7-25880c649dd0&quot;,&quot;f1904003-e19e-4a65-9e02-ee304fa85ffc&quot;,&quot;052996ae-87d5-4816-ac57-3169d4c42e17&quot;,&quot;3b931849-dca1-4d91-a63c-6876673aea10&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:285,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;23d421ce-e500-4a4e-b1dc-4340420fdb55&quot;,&quot;title&quot;:&quot;Game: A+ protocol&quot;,&quot;fullFile&quot;:&quot;/bwa/test/assignment/management.test.js&quot;,&quot;file&quot;:&quot;/test/assignment/management.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;C: create operation available&quot;,&quot;fullTitle&quot;:&quot;Game: A+ protocol C: create operation available&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;/*\n* Create operation testing done in\n* createQuestionnaire.test.js\n*/&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc76c8d4-e7cd-48e8-86c5-402eb5fcf416&quot;,&quot;parentUUID&quot;:&quot;23d421ce-e500-4a4e-b1dc-4340420fdb55&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;R: read operation available&quot;,&quot;fullTitle&quot;:&quot;Game: A+ protocol R: read operation available&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;/*\n* Read operation testing done in\n* readQuestionnaire.test.js\n*/&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c4f0df30-ff60-44c3-962a-356dda62bc24&quot;,&quot;parentUUID&quot;:&quot;23d421ce-e500-4a4e-b1dc-4340420fdb55&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;U: update operation available&quot;,&quot;fullTitle&quot;:&quot;Game: A+ protocol U: update operation available&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;/*\n* Update operation testing done in\n* updateQuestionnaire.test.js\n*/&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3087cb0c-136c-4448-bb55-dae2f2e0d965&quot;,&quot;parentUUID&quot;:&quot;23d421ce-e500-4a4e-b1dc-4340420fdb55&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;D: delete operation available&quot;,&quot;fullTitle&quot;:&quot;Game: A+ protocol D: delete operation available&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;/*\n* Delete operation testing done in\n* deleteQuestionnaire.test.js\n*/&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7c30d4e-edd2-4d71-9a86-aaaa4dec14aa&quot;,&quot;parentUUID&quot;:&quot;23d421ce-e500-4a4e-b1dc-4340420fdb55&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fc76c8d4-e7cd-48e8-86c5-402eb5fcf416&quot;,&quot;c4f0df30-ff60-44c3-962a-356dda62bc24&quot;,&quot;3087cb0c-136c-4448-bb55-dae2f2e0d965&quot;,&quot;e7c30d4e-edd2-4d71-9a86-aaaa4dec14aa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;25cf9a4d-c01d-4026-aa70-89a70041cf3a&quot;,&quot;title&quot;:&quot;Read Questionnaire&quot;,&quot;fullFile&quot;:&quot;/bwa/test/assignment/readQuestionnaire.test.js&quot;,&quot;file&quot;:&quot;/test/assignment/readQuestionnaire.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Read Questionnaire \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:593,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await User.deleteMany({});\n    const admin = new User(adminData);\n    await admin.save();\n    const teacher = new User(teacherData);\n    await teacher.save();\n    const student = new User(studentData);\n    await student.save();\n}\ncatch (err) {\n  // eslint-disable-next-line no-console\n  console.log(err);\n  throw err;\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;192bfccc-bb5d-42c4-8be8-85f344ed4ca8&quot;,&quot;parentUUID&quot;:&quot;25cf9a4d-c01d-4026-aa70-89a70041cf3a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Read Questionnaire \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;adminUser\n    .post(&#x27;/users/login&#x27;)\n    .send(adminCredentials)\n    .end(function (err, response) {\n        if (err) return done(err);\n        expect(response.statusCode).to.equal(302);\n        expect(&#x27;Location&#x27;, &#x27;/users/me&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc7a4931-33e5-4310-9515-753ddfcc53a5&quot;,&quot;parentUUID&quot;:&quot;25cf9a4d-c01d-4026-aa70-89a70041cf3a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Read Questionnaire \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;teacherUser\n    .post(&#x27;/users/login&#x27;)\n    .send(teacherCredentials)\n    .end(function (err, response) {\n        if (err) return done(err);\n        expect(response.statusCode).to.equal(302);\n        expect(&#x27;Location&#x27;, &#x27;/users/me&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;322cf21a-e962-4fc1-8b8c-239c755f56e6&quot;,&quot;parentUUID&quot;:&quot;25cf9a4d-c01d-4026-aa70-89a70041cf3a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Read Questionnaire \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;studentUser\n    .post(&#x27;/users/login&#x27;)\n    .send(studentCredentials)\n    .end(function (err, response) {\n        if (err) return done(err);\n        expect(response.statusCode).to.equal(302);\n        expect(&#x27;Location&#x27;, &#x27;/users/me&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;993614d0-7a04-4c4b-a301-6eb0114493a2&quot;,&quot;parentUUID&quot;:&quot;25cf9a4d-c01d-4026-aa70-89a70041cf3a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Read Questionnaire \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Questionnaire.deleteMany({});\nlet questionnaire = new Questionnaire(questionnaireData);\nid = questionnaire._id;\nawait questionnaire.save();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;457ede86-a7af-4901-b99d-7c0bc9d91940&quot;,&quot;parentUUID&quot;:&quot;25cf9a4d-c01d-4026-aa70-89a70041cf3a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;70cda694-e0ee-4c15-89df-1e9e0627795f&quot;,&quot;title&quot;:&quot;Listing questionnaires&quot;,&quot;fullFile&quot;:&quot;/bwa/test/assignment/readQuestionnaire.test.js&quot;,&quot;file&quot;:&quot;/test/assignment/readQuestionnaire.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Admin should be able to list questionnaires.&quot;,&quot;fullTitle&quot;:&quot;Read Questionnaire Listing questionnaires Admin should be able to list questionnaires.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:48,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const rawData = fs.readFileSync(fPath + &#x27;/adminQuestionnaire.json&#x27;, &#x27;utf8&#x27;);\nsendToServerList(200, adminUser, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d53f9530-b866-450c-b0ad-cc1c3cec3f3a&quot;,&quot;parentUUID&quot;:&quot;70cda694-e0ee-4c15-89df-1e9e0627795f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Teacher should be able to list questionnaires.&quot;,&quot;fullTitle&quot;:&quot;Read Questionnaire Listing questionnaires Teacher should be able to list questionnaires.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:70,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const rawData = fs.readFileSync(fPath + &#x27;/adminQuestionnaire.json&#x27;, &#x27;utf8&#x27;);\nsendToServerList(200, teacherUser, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4898849c-3c8c-4dda-a4ae-e2b7b582c9e0&quot;,&quot;parentUUID&quot;:&quot;70cda694-e0ee-4c15-89df-1e9e0627795f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Student should NOT be able to list questionnaires.&quot;,&quot;fullTitle&quot;:&quot;Read Questionnaire Listing questionnaires Student should NOT be able to list questionnaires.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const rawData = fs.readFileSync(fPath + &#x27;/adminQuestionnaire.json&#x27;, &#x27;utf8&#x27;);\nsendToServerList(302, studentUser, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c3613d7-30dc-4bb8-af06-0d4fc60f1fe4&quot;,&quot;parentUUID&quot;:&quot;70cda694-e0ee-4c15-89df-1e9e0627795f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Non-logged-in user should NOT be able to list questionnaires.&quot;,&quot;fullTitle&quot;:&quot;Read Questionnaire Listing questionnaires Non-logged-in user should NOT be able to list questionnaires.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const rawData = fs.readFileSync(fPath + &#x27;/adminQuestionnaire.json&#x27;, &#x27;utf8&#x27;);\nsendToServerList(302, unauthorizedUser, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ed6740e-711c-412a-90c0-0f46e9036ac9&quot;,&quot;parentUUID&quot;:&quot;70cda694-e0ee-4c15-89df-1e9e0627795f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d53f9530-b866-450c-b0ad-cc1c3cec3f3a&quot;,&quot;4898849c-3c8c-4dda-a4ae-e2b7b582c9e0&quot;,&quot;1c3613d7-30dc-4bb8-af06-0d4fc60f1fe4&quot;,&quot;5ed6740e-711c-412a-90c0-0f46e9036ac9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:140,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;dd48c628-bcf5-46ac-aa25-9e83eff813b5&quot;,&quot;title&quot;:&quot;Showing questions&quot;,&quot;fullFile&quot;:&quot;/bwa/test/assignment/readQuestionnaire.test.js&quot;,&quot;file&quot;:&quot;/test/assignment/readQuestionnaire.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Admin should be able to show questions.&quot;,&quot;fullTitle&quot;:&quot;Read Questionnaire Showing questions Admin should be able to show questions.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:47,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const rawData = fs.readFileSync(fPath + &#x27;/adminQuestionnaire.json&#x27;, &#x27;utf8&#x27;);\nsendToServerShow(id, 200, adminUser, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce8f6489-c846-48fb-bac9-79513f9dca6e&quot;,&quot;parentUUID&quot;:&quot;dd48c628-bcf5-46ac-aa25-9e83eff813b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Teacher should be able to show questions.&quot;,&quot;fullTitle&quot;:&quot;Read Questionnaire Showing questions Teacher should be able to show questions.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:43,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const rawData = fs.readFileSync(fPath + &#x27;/adminQuestionnaire.json&#x27;, &#x27;utf8&#x27;);\nsendToServerShow(id, 200, teacherUser, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;868d086c-5c7a-400f-ace2-e2c1d2cf5a16&quot;,&quot;parentUUID&quot;:&quot;dd48c628-bcf5-46ac-aa25-9e83eff813b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Student should NOT be able to show questions.&quot;,&quot;fullTitle&quot;:&quot;Read Questionnaire Showing questions Student should NOT be able to show questions.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const rawData = fs.readFileSync(fPath + &#x27;/adminQuestionnaire.json&#x27;, &#x27;utf8&#x27;);\nsendToServerShow(id, 302, studentUser, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e717b7fe-97db-4ae3-b906-aaf994617bef&quot;,&quot;parentUUID&quot;:&quot;dd48c628-bcf5-46ac-aa25-9e83eff813b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Non-logged-in user should NOT be able to show questions.&quot;,&quot;fullTitle&quot;:&quot;Read Questionnaire Showing questions Non-logged-in user should NOT be able to show questions.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//const rawData = fs.readFileSync(fPath + &#x27;/adminQuestionnaire.json&#x27;, &#x27;utf8&#x27;);\nsendToServerShow(id, 302, unauthorizedUser, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d395fb04-8608-4f01-933c-293b596ca59e&quot;,&quot;parentUUID&quot;:&quot;dd48c628-bcf5-46ac-aa25-9e83eff813b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ce8f6489-c846-48fb-bac9-79513f9dca6e&quot;,&quot;868d086c-5c7a-400f-ace2-e2c1d2cf5a16&quot;,&quot;e717b7fe-97db-4ae3-b906-aaf994617bef&quot;,&quot;d395fb04-8608-4f01-933c-293b596ca59e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:104,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;9b21a9c6-5f94-4089-a4c6-70fe3c7d6b50&quot;,&quot;title&quot;:&quot;Update Questionnaire&quot;,&quot;fullFile&quot;:&quot;/bwa/test/assignment/updateQuestionnaire.test.js&quot;,&quot;file&quot;:&quot;/test/assignment/updateQuestionnaire.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Update Questionnaire \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:609,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await User.deleteMany({});\n    const admin = new User(adminData);\n    await admin.save();\n    const teacher = new User(teacherData);\n    await teacher.save();\n    const student = new User(studentData);\n    await student.save();\n}\ncatch (err) {\n  // eslint-disable-next-line no-console\n  console.log(err);\n  throw err;\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;960cb647-dd29-4a71-beb4-f29374f68a83&quot;,&quot;parentUUID&quot;:&quot;9b21a9c6-5f94-4089-a4c6-70fe3c7d6b50&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Update Questionnaire \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:228,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;adminUser\n    .post(&#x27;/users/login&#x27;)\n    .send(adminCredentials)\n    .end(function (err, response) {\n        if (err) return done(err);\n        expect(response.statusCode).to.equal(302);\n        expect(&#x27;Location&#x27;, &#x27;/users/me&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df611c2f-fd13-40aa-a7d5-180fda5562e9&quot;,&quot;parentUUID&quot;:&quot;9b21a9c6-5f94-4089-a4c6-70fe3c7d6b50&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Update Questionnaire \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:212,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;teacherUser\n    .post(&#x27;/users/login&#x27;)\n    .send(teacherCredentials)\n    .end(function (err, response) {\n        if (err) return done(err);\n        expect(response.statusCode).to.equal(302);\n        expect(&#x27;Location&#x27;, &#x27;/users/me&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f77361d0-4046-4b43-bf1b-418c32ffdac9&quot;,&quot;parentUUID&quot;:&quot;9b21a9c6-5f94-4089-a4c6-70fe3c7d6b50&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Update Questionnaire \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:208,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;studentUser\n    .post(&#x27;/users/login&#x27;)\n    .send(studentCredentials)\n    .end(function (err, response) {\n        if (err) return done(err);\n        expect(response.statusCode).to.equal(302);\n        expect(&#x27;Location&#x27;, &#x27;/users/me&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;67689651-99c6-4498-95f1-1aad774737d5&quot;,&quot;parentUUID&quot;:&quot;9b21a9c6-5f94-4089-a4c6-70fe3c7d6b50&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Update Questionnaire \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Questionnaire.deleteMany({});\nlet questionnaire = new Questionnaire(questionnaireData);\nid = questionnaire._id;\nawait questionnaire.save();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26658a9a-c08f-43a8-a52b-44511ccd4dd4&quot;,&quot;parentUUID&quot;:&quot;9b21a9c6-5f94-4089-a4c6-70fe3c7d6b50&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cf0cd9c8-e4fc-4d90-aa1e-9dd85631c53e&quot;,&quot;title&quot;:&quot;Questionnaire updating authorization&quot;,&quot;fullFile&quot;:&quot;/bwa/test/assignment/updateQuestionnaire.test.js&quot;,&quot;file&quot;:&quot;/test/assignment/updateQuestionnaire.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;must let an admin to edit questionnaires&quot;,&quot;fullTitle&quot;:&quot;Update Questionnaire Questionnaire updating authorization must let an admin to edit questionnaires&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:203,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const rawData = fs.readFileSync(fPath + &#x27;/adminQuestionnaire.json&#x27;, &#x27;utf8&#x27;);\n        sendToServer(rawData, id, 200, 200, adminUser, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;079324aa-04b3-42a7-b5cc-a6feab63f25d&quot;,&quot;parentUUID&quot;:&quot;cf0cd9c8-e4fc-4d90-aa1e-9dd85631c53e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must let a teacher to edit questionnaires&quot;,&quot;fullTitle&quot;:&quot;Update Questionnaire Questionnaire updating authorization must let a teacher to edit questionnaires&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:169,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const rawData = fs.readFileSync(fPath + &#x27;/teacherQuestionnaire.json&#x27;, &#x27;utf8&#x27;);\n        sendToServer(rawData, id, 200, 200, teacherUser, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8bad3709-31ef-49d7-a243-9e438856cedf&quot;,&quot;parentUUID&quot;:&quot;cf0cd9c8-e4fc-4d90-aa1e-9dd85631c53e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must NOT let a student to edit questionnaires&quot;,&quot;fullTitle&quot;:&quot;Update Questionnaire Questionnaire updating authorization must NOT let a student to edit questionnaires&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const rawData = fs.readFileSync(fPath + &#x27;/studentQuestionnaire.json&#x27;, &#x27;utf8&#x27;);\n        sendToServer(rawData, id, 302, 302, studentUser, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;65c8655c-890d-4775-9b29-713008e7cb25&quot;,&quot;parentUUID&quot;:&quot;cf0cd9c8-e4fc-4d90-aa1e-9dd85631c53e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must NOT let a non-logged-in user to edit questionnaires&quot;,&quot;fullTitle&quot;:&quot;Update Questionnaire Questionnaire updating authorization must NOT let a non-logged-in user to edit questionnaires&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const rawData = fs.readFileSync(fPath + &#x27;/studentQuestionnaire.json&#x27;, &#x27;utf8&#x27;);\n        sendToServer(rawData, id, 302, 302, unauthorizedUser, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;02613b96-fadf-460f-846f-de34fd4902c5&quot;,&quot;parentUUID&quot;:&quot;cf0cd9c8-e4fc-4d90-aa1e-9dd85631c53e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must require a valid csrf token&quot;,&quot;fullTitle&quot;:&quot;Update Questionnaire Questionnaire updating authorization must require a valid csrf token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:45,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const rawData = fs.readFileSync(fPath + &#x27;/adminQuestionnaire.json&#x27;, &#x27;utf8&#x27;);\nconst csrfToken = &#x27;\&quot; \&quot;&#x27;;\nconst data = rawData + csrfToken + &#x27; }&#x27;;\nadminUser.post(&#x27;/questionnaires/edit/&#x27; + id)\n    .send(JSON.parse(data))\n    .end(function (err, res) {\n        if (err) return done(err);\n        expect(res.statusCode).to.equal(403);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22f16551-2cc5-4038-ac9b-896d623069bb&quot;,&quot;parentUUID&quot;:&quot;cf0cd9c8-e4fc-4d90-aa1e-9dd85631c53e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;079324aa-04b3-42a7-b5cc-a6feab63f25d&quot;,&quot;8bad3709-31ef-49d7-a243-9e438856cedf&quot;,&quot;65c8655c-890d-4775-9b29-713008e7cb25&quot;,&quot;02613b96-fadf-460f-846f-de34fd4902c5&quot;,&quot;22f16551-2cc5-4038-ac9b-896d623069bb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:451,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;067646d3-35ca-4cc1-bdb4-d5f766a8531d&quot;,&quot;title&quot;:&quot;Questionnaire editing validation&quot;,&quot;fullFile&quot;:&quot;/bwa/test/assignment/updateQuestionnaire.test.js&quot;,&quot;file&quot;:&quot;/test/assignment/updateQuestionnaire.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;must be able to handle an empty questionnaire&quot;,&quot;fullTitle&quot;:&quot;Update Questionnaire Questionnaire editing validation must be able to handle an empty questionnaire&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:112,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;emptyQuestionnaire.json&#x27;;\nvalidationSend(file, id, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3fa46f5c-7e14-445c-8d0a-dca128be0394&quot;,&quot;parentUUID&quot;:&quot;067646d3-35ca-4cc1-bdb4-d5f766a8531d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must be able to handle an empty title&quot;,&quot;fullTitle&quot;:&quot;Update Questionnaire Questionnaire editing validation must be able to handle an empty title&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:142,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;emptyTitle.json&#x27;;\nvalidationSend(file, id, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5e4c026-e8fa-4e3c-bee4-44a8be898d06&quot;,&quot;parentUUID&quot;:&quot;067646d3-35ca-4cc1-bdb4-d5f766a8531d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must be able to handle a too long title&quot;,&quot;fullTitle&quot;:&quot;Update Questionnaire Questionnaire editing validation must be able to handle a too long title&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:125,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;tooLongTitle.json&#x27;;\nvalidationSend(file, id, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f2b48d6-99ec-47e0-8c61-057a9b34a6a2&quot;,&quot;parentUUID&quot;:&quot;067646d3-35ca-4cc1-bdb4-d5f766a8531d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must be able to handle incorrect submissions number&quot;,&quot;fullTitle&quot;:&quot;Update Questionnaire Questionnaire editing validation must be able to handle incorrect submissions number&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:152,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;incorrectSubmissions.json&#x27;;\nvalidationSend(file, id, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c5253ff-be25-42d0-895a-4e07996d791d&quot;,&quot;parentUUID&quot;:&quot;067646d3-35ca-4cc1-bdb4-d5f766a8531d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must be able to handle a no questions situation&quot;,&quot;fullTitle&quot;:&quot;Update Questionnaire Questionnaire editing validation must be able to handle a no questions situation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:106,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;noQuestions.json&#x27;;\nvalidationSend(file, id, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57da8482-0cad-40bc-9eed-1b3244118bbb&quot;,&quot;parentUUID&quot;:&quot;067646d3-35ca-4cc1-bdb4-d5f766a8531d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must be able to handle a duplicate questions title&quot;,&quot;fullTitle&quot;:&quot;Update Questionnaire Questionnaire editing validation must be able to handle a duplicate questions title&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:110,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;duplicateQuestions.json&#x27;;\nvalidationSend(file, id, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1847737-4a82-4a7f-ab37-308ef4968061&quot;,&quot;parentUUID&quot;:&quot;067646d3-35ca-4cc1-bdb4-d5f766a8531d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must be able to handle a no options situation&quot;,&quot;fullTitle&quot;:&quot;Update Questionnaire Questionnaire editing validation must be able to handle a no options situation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:102,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;noOptions.json&#x27;;\nvalidationSend(file, id, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ac4c546-4a0f-4650-9e2d-7f227a28fe3a&quot;,&quot;parentUUID&quot;:&quot;067646d3-35ca-4cc1-bdb4-d5f766a8531d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must be able to handle incorrect number of options&quot;,&quot;fullTitle&quot;:&quot;Update Questionnaire Questionnaire editing validation must be able to handle incorrect number of options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:108,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;incorrectNumberOfOptions.json&#x27;;\nvalidationSend(file, id, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;541ae2a1-b1b5-40fb-89c4-f95ff95291c4&quot;,&quot;parentUUID&quot;:&quot;067646d3-35ca-4cc1-bdb4-d5f766a8531d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must be able to handle duplicate options&quot;,&quot;fullTitle&quot;:&quot;Update Questionnaire Questionnaire editing validation must be able to handle duplicate options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:107,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;duplicateOptions.json&#x27;;\nvalidationSend(file, id, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;08d7c7a4-9ae4-4729-b478-0f522c58960a&quot;,&quot;parentUUID&quot;:&quot;067646d3-35ca-4cc1-bdb4-d5f766a8531d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must be able to handle \&quot;true\&quot; options missing&quot;,&quot;fullTitle&quot;:&quot;Update Questionnaire Questionnaire editing validation must be able to handle \&quot;true\&quot; options missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:165,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;trueOptionsMissing.json&#x27;;\nvalidationSend(file, id, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dbb89a9e-0a19-4d93-bfa2-2a32bdf12efa&quot;,&quot;parentUUID&quot;:&quot;067646d3-35ca-4cc1-bdb4-d5f766a8531d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must be able to handle incorrect max points&quot;,&quot;fullTitle&quot;:&quot;Update Questionnaire Questionnaire editing validation must be able to handle incorrect max points&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:159,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;incorrectMaxPoints.json&#x27;;\nvalidationSend(file, id, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98ab1909-c56e-4cb9-9f2b-f37b06f9b73b&quot;,&quot;parentUUID&quot;:&quot;067646d3-35ca-4cc1-bdb4-d5f766a8531d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must be able to handle xss&quot;,&quot;fullTitle&quot;:&quot;Update Questionnaire Questionnaire editing validation must be able to handle xss&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:110,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const file = &#x27;xss.json&#x27;;\nvalidationSendMore(file, id, 200, 200, done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;90c70020-6295-4ce2-8852-edc5c0dbbcb3&quot;,&quot;parentUUID&quot;:&quot;067646d3-35ca-4cc1-bdb4-d5f766a8531d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3fa46f5c-7e14-445c-8d0a-dca128be0394&quot;,&quot;f5e4c026-e8fa-4e3c-bee4-44a8be898d06&quot;,&quot;8f2b48d6-99ec-47e0-8c61-057a9b34a6a2&quot;,&quot;6c5253ff-be25-42d0-895a-4e07996d791d&quot;,&quot;57da8482-0cad-40bc-9eed-1b3244118bbb&quot;,&quot;c1847737-4a82-4a7f-ab37-308ef4968061&quot;,&quot;7ac4c546-4a0f-4650-9e2d-7f227a28fe3a&quot;,&quot;541ae2a1-b1b5-40fb-89c4-f95ff95291c4&quot;,&quot;08d7c7a4-9ae4-4729-b478-0f522c58960a&quot;,&quot;dbb89a9e-0a19-4d93-bfa2-2a32bdf12efa&quot;,&quot;98ab1909-c56e-4cb9-9f2b-f37b06f9b73b&quot;,&quot;90c70020-6295-4ce2-8852-edc5c0dbbcb3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1498,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;30f33aa3-e3d9-4bd7-af3c-8fa349250b6e&quot;,&quot;title&quot;:&quot;Game reply: A+ protocol&quot;,&quot;fullFile&quot;:&quot;/bwa/test/integration/hello.reply.test.js&quot;,&quot;file&quot;:&quot;/test/integration/hello.reply.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Game reply: A+ protocol \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:474,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;server = http.createServer(app).listen(port);\nBrowser.localhost(&#x27;bwa&#x27;, port);\nbrowser = new Browser();\n// console.log(&#x27;A+ protocol defined in https://github.com/Aalto-LeTech/a-plus/blob/master/doc/GRADERS.md&#x27;);\nawait auth(browser);\nawait browser.visit(&#x27;/&#x27;);\nawait browser.pressButton(&#x27;#grade&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;144544ef-31bd-425f-bb3d-7ff4f0c811a3&quot;,&quot;parentUUID&quot;:&quot;30f33aa3-e3d9-4bd7-af3c-8fa349250b6e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Game reply: A+ protocol \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;server.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1fabda4c-2b53-43cd-82e1-a1614414b886&quot;,&quot;parentUUID&quot;:&quot;30f33aa3-e3d9-4bd7-af3c-8fa349250b6e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;must have meta field \&quot;status\&quot; in head&quot;,&quot;fullTitle&quot;:&quot;Game reply: A+ protocol must have meta field \&quot;status\&quot; in head&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.equal(\n    browser.document.head.querySelectorAll(&#x27;[name=status]&#x27;).length,\n    1\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;65e09bf7-2080-45b9-bb1a-d30fec75bd84&quot;,&quot;parentUUID&quot;:&quot;30f33aa3-e3d9-4bd7-af3c-8fa349250b6e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have meta field \&quot;max_points\&quot; in head&quot;,&quot;fullTitle&quot;:&quot;Game reply: A+ protocol should have meta field \&quot;max_points\&quot; in head&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.equal(\n    browser.document.head.querySelectorAll(&#x27;[name=max_points]&#x27;).length,\n    1\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98d1cbb4-3b13-4fb1-ae2c-af9ca637d815&quot;,&quot;parentUUID&quot;:&quot;30f33aa3-e3d9-4bd7-af3c-8fa349250b6e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must have meta field \&quot;points\&quot; in head&quot;,&quot;fullTitle&quot;:&quot;Game reply: A+ protocol must have meta field \&quot;points\&quot; in head&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.equal(\n    browser.document.head.querySelectorAll(&#x27;[name=points]&#x27;).length,\n    1\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b0409b70-115c-4225-a875-731051233fe4&quot;,&quot;parentUUID&quot;:&quot;30f33aa3-e3d9-4bd7-af3c-8fa349250b6e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;meta field \&quot;points\&quot; in head must be less than or equal to max_points&quot;,&quot;fullTitle&quot;:&quot;Game reply: A+ protocol meta field \&quot;points\&quot; in head must be less than or equal to max_points&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const pointsElem = browser.document.head.querySelector(&#x27;[name=points]&#x27;);\nconst points = parseInt(pointsElem.getAttribute(&#x27;content&#x27;));\nconst maxPointsElem = browser.document.head.querySelector(\n    &#x27;[name=max_points]&#x27;\n);\nconst maxPoints = parseInt(maxPointsElem.getAttribute(&#x27;content&#x27;));\nassert(\n    points &lt;= maxPoints,\n    &#x27;head meta points must be less or equal to max_points&#x27;\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;216df446-7831-4cdf-b938-8cd19b440b86&quot;,&quot;parentUUID&quot;:&quot;30f33aa3-e3d9-4bd7-af3c-8fa349250b6e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have meta field \&quot;DC.Description\&quot; in head&quot;,&quot;fullTitle&quot;:&quot;Game reply: A+ protocol should have meta field \&quot;DC.Description\&quot; in head&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Where does this field come from? Or more specifically\n// where does the value/description come from?\n// (Not strictly related to testing but still...)\nassert.equal(\n    browser.document.head.querySelectorAll(&#x27;[name=\&quot;DC.Description\&quot;]&#x27;)\n        .length,\n    1\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2fe98b63-5971-465d-9c8f-f82e3dc14254&quot;,&quot;parentUUID&quot;:&quot;30f33aa3-e3d9-4bd7-af3c-8fa349250b6e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have meta field \&quot;DC.Title\&quot; in head&quot;,&quot;fullTitle&quot;:&quot;Game reply: A+ protocol should have meta field \&quot;DC.Title\&quot; in head&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Where does this field come from? Or more specifically\n// where does the value/title come from? (Is this the question title?)\n// (Not strictly related to testing but still...)\nassert.equal(\n    browser.document.head.querySelectorAll(&#x27;[name=\&quot;DC.Title\&quot;]&#x27;).length,\n    1\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22508f62-fb7c-40bf-a966-0cbb4c345143&quot;,&quot;parentUUID&quot;:&quot;30f33aa3-e3d9-4bd7-af3c-8fa349250b6e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;65e09bf7-2080-45b9-bb1a-d30fec75bd84&quot;,&quot;98d1cbb4-3b13-4fb1-ae2c-af9ca637d815&quot;,&quot;b0409b70-115c-4225-a875-731051233fe4&quot;,&quot;216df446-7831-4cdf-b938-8cd19b440b86&quot;,&quot;2fe98b63-5971-465d-9c8f-f82e3dc14254&quot;,&quot;22508f62-fb7c-40bf-a966-0cbb4c345143&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;6f7e08d1-0b2f-4a7a-ae17-e338ba610ae0&quot;,&quot;title&quot;:&quot;Game: A+ protocol&quot;,&quot;fullFile&quot;:&quot;/bwa/test/integration/hello.test.js&quot;,&quot;file&quot;:&quot;/test/integration/hello.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Game: A+ protocol \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:375,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;server = http.createServer(app).listen(port);\nBrowser.localhost(&#x27;bwa&#x27;, port);\nbrowser = new Browser();\n// console.log(&#x27;A+ protocol defined in https://github.com/Aalto-LeTech/a-plus/blob/master/doc/GRADERS.md&#x27;);\nawait auth(browser);\nawait browser.visit(&#x27;/&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5eceb3fe-fd61-4857-bb1a-7d3557556853&quot;,&quot;parentUUID&quot;:&quot;6f7e08d1-0b2f-4a7a-ae17-e338ba610ae0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Game: A+ protocol \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;server.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7fc11175-4ad4-4c4e-80db-2cd2f01f0e2f&quot;,&quot;parentUUID&quot;:&quot;6f7e08d1-0b2f-4a7a-ae17-e338ba610ae0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;must have a form with POST method&quot;,&quot;fullTitle&quot;:&quot;Game: A+ protocol must have a form with POST method&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//http://zombie.js.org/#assertions\nbrowser.assert.element(&#x27;form[method=\&quot;POST\&quot;]&#x27;);\n// browser.assert.attribute(&#x27;form&#x27;, &#x27;method&#x27;, &#x27;post&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b0c0f262-2207-412f-8a4c-401f3c5a7008&quot;,&quot;parentUUID&quot;:&quot;6f7e08d1-0b2f-4a7a-ae17-e338ba610ae0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must have a form with submit button&quot;,&quot;fullTitle&quot;:&quot;Game: A+ protocol must have a form with submit button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;browser.assert.element(&#x27;form button[type=\&quot;submit\&quot;]&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6571c962-e90e-423f-a83e-ae1407565e0a&quot;,&quot;parentUUID&quot;:&quot;6f7e08d1-0b2f-4a7a-ae17-e338ba610ae0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;the submit button must have id \&quot;grade\&quot;&quot;,&quot;fullTitle&quot;:&quot;Game: A+ protocol the submit button must have id \&quot;grade\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;browser.assert.element(&#x27;#grade&#x27;);\nbrowser.assert.element(&#x27;button#grade&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1e5d103-ea97-40a4-adf9-61c5a553f2ed&quot;,&quot;parentUUID&quot;:&quot;6f7e08d1-0b2f-4a7a-ae17-e338ba610ae0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b0c0f262-2207-412f-8a4c-401f3c5a7008&quot;,&quot;6571c962-e90e-423f-a83e-ae1407565e0a&quot;,&quot;c1e5d103-ea97-40a4-adf9-61c5a553f2ed&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;1c4e04e2-0cfe-4711-be54-32ab5248be50&quot;,&quot;title&quot;:&quot;Application security&quot;,&quot;fullFile&quot;:&quot;/bwa/test/integration/security.test.js&quot;,&quot;file&quot;:&quot;/test/integration/security.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Application security \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:238,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { email, password } = admin;\nrequest = chai.request.agent(app);\nresponse = await request\n    .post(loginUrl)\n    .type(&#x27;form&#x27;)\n    .send({ email, password });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f3b64567-9382-4d32-8d56-8d223d5fae38&quot;,&quot;parentUUID&quot;:&quot;1c4e04e2-0cfe-4711-be54-32ab5248be50&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Application security \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await response.get(&#x27;/users/logout&#x27;);\nrequest.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c030fdd6-e2db-49d3-aa55-7008ff1cfcdd&quot;,&quot;parentUUID&quot;:&quot;1c4e04e2-0cfe-4711-be54-32ab5248be50&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should have \&quot;HttpOnly\&quot; cookie policy&quot;,&quot;fullTitle&quot;:&quot;Application security should have \&quot;HttpOnly\&quot; cookie policy&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const cookie = response.headers[&#x27;set-cookie&#x27;].find(cookieString =&gt; {\n    return cookieString.startsWith(&#x27;bwa=&#x27;);\n}).toLowerCase();\n// eslint-disable-next-line no-unused-expressions\nexpect(cookie).to.exist;\nexpect(cookie).to.include(&#x27;httponly&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec6817b7-5a28-4db2-baf1-bd0ae517736a&quot;,&quot;parentUUID&quot;:&quot;1c4e04e2-0cfe-4711-be54-32ab5248be50&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have \&quot;SameSite\&quot; cookie policy set to Strict or Lax&quot;,&quot;fullTitle&quot;:&quot;Application security should have \&quot;SameSite\&quot; cookie policy set to Strict or Lax&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const cookie = response.headers[&#x27;set-cookie&#x27;].find(cookieString =&gt; {\n    return cookieString.startsWith(&#x27;bwa=&#x27;);\n}).toLowerCase();\nexpect(cookie).to.satisfy((c) =&gt; {\n    return c.includes(&#x27;samesite=lax&#x27;) || c.includes(&#x27;samesite=strict&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;908aca6d-3bab-45ce-aed5-2d05035825ac&quot;,&quot;parentUUID&quot;:&quot;1c4e04e2-0cfe-4711-be54-32ab5248be50&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should block directory traversal&quot;,&quot;fullTitle&quot;:&quot;Application security should block directory traversal&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;response = await request.get(&#x27;/../app.js&#x27;);\nexpect(response).to.have.status(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9dc4685f-900d-4407-94a7-80eea74acf12&quot;,&quot;parentUUID&quot;:&quot;1c4e04e2-0cfe-4711-be54-32ab5248be50&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ec6817b7-5a28-4db2-baf1-bd0ae517736a&quot;,&quot;908aca6d-3bab-45ce-aed5-2d05035825ac&quot;,&quot;9dc4685f-900d-4407-94a7-80eea74acf12&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:38,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;d7f64e97-cca8-4532-a1b6-40cfa6df9a56&quot;,&quot;title&quot;:&quot;/users&quot;,&quot;fullFile&quot;:&quot;/bwa/test/integration/users.test.js&quot;,&quot;file&quot;:&quot;/test/integration/users.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;/users \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:197,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    // remove all users from the database and re-create admin user\n    await User.deleteMany({});\n    const userData = {...admin, role: &#x27;admin&#x27;};\n    const user = new User(userData);\n    await user.save();\n} catch (err) {\n    // eslint-disable-next-line no-console\n    console.log(err);\n    throw err;\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ffdde707-cd80-437f-9c73-e3a89fd631a3&quot;,&quot;parentUUID&quot;:&quot;d7f64e97-cca8-4532-a1b6-40cfa6df9a56&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8a788fe0-40cf-4e66-bbbe-85d6f8939a5f&quot;,&quot;title&quot;:&quot;/register&quot;,&quot;fullFile&quot;:&quot;/bwa/test/integration/users.test.js&quot;,&quot;file&quot;:&quot;/test/integration/users.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;/users /register \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request = chai.request.agent(app);\npayload = {\n    name: &#x27;user&#x27;,\n    email: &#x27;user@sposti.fi&#x27;,\n    password: &#x27;1234567890&#x27;,\n    passwordConfirmation: &#x27;1234567890&#x27;\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df2971cb-fbe9-44fd-b99a-39c40f440849&quot;,&quot;parentUUID&quot;:&quot;8a788fe0-40cf-4e66-bbbe-85d6f8939a5f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;/users /register \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47d22f51-bb99-4fee-b68e-c23b2a6ea617&quot;,&quot;parentUUID&quot;:&quot;8a788fe0-40cf-4e66-bbbe-85d6f8939a5f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should register successfully a correct user&quot;,&quot;fullTitle&quot;:&quot;/users /register should register successfully a correct user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:243,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await request\n    .post(registerUrl)\n    .type(&#x27;form&#x27;)\n    .send(payload);\nexpect(response).to.redirectTo(/\\/users\\/login$/);\nconst user = await User.findOne({ email: payload.email }).exec();\nexpect(user).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4fec78af-4710-45e7-95cc-81857017e7c2&quot;,&quot;parentUUID&quot;:&quot;8a788fe0-40cf-4e66-bbbe-85d6f8939a5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;by default, the role of the registered user is student&quot;,&quot;fullTitle&quot;:&quot;/users /register by default, the role of the registered user is student&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:240,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await request\n    .post(registerUrl)\n    .type(&#x27;form&#x27;)\n    .send(payload);\nexpect(response).to.redirectTo(/\\/users\\/login$/);\nconst user = await User.findOne({ email: payload.email }).exec();\nexpect(user).to.exist;\nexpect(user.role).to.exist;\nexpect(user.role).to.equal(&#x27;student&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68b64b9a-2dcc-49c6-8482-8d6485379510&quot;,&quot;parentUUID&quot;:&quot;8a788fe0-40cf-4e66-bbbe-85d6f8939a5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should prevent from registering the same user twice&quot;,&quot;fullTitle&quot;:&quot;/users /register should prevent from registering the same user twice&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:265,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await request\n    .post(registerUrl)\n    .type(&#x27;form&#x27;)\n    .send(payload);\nconst response = await request\n    .post(registerUrl)\n    .type(&#x27;form&#x27;)\n    .send(payload);\nexpect(response).to.not.redirect;\nexpect(response).to.be.html;\nconst user = await User.findOne({ email: payload.email }).exec();\nexpect(user).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85f5c335-b280-4fe6-bd60-b9b4c73f4497&quot;,&quot;parentUUID&quot;:&quot;8a788fe0-40cf-4e66-bbbe-85d6f8939a5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail registeration due to a missing email&quot;,&quot;fullTitle&quot;:&quot;/users /register should fail registeration due to a missing email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:135,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const email = payload.email;\ndelete payload.email;\nconst response = await request\n    .post(registerUrl)\n    .type(&#x27;form&#x27;)\n    .send(payload);\nexpect(response).to.not.redirect;\nexpect(response).to.be.html;\nconst user = await User.findOne({ email }).exec();\nexpect(user).not.to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e36d3b94-efe6-4e1c-8601-c173200d676b&quot;,&quot;parentUUID&quot;:&quot;8a788fe0-40cf-4e66-bbbe-85d6f8939a5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not accept registration with illegal email&quot;,&quot;fullTitle&quot;:&quot;/users /register should not accept registration with illegal email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:42,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;payload.email = &#x27;wrong-wrong&#x27;;\nconst response = await request\n    .post(registerUrl)\n    .type(&#x27;form&#x27;)\n    .send(payload);\nexpect(response).to.not.redirect;\nexpect(response).to.be.html;\nconst user = await User.findOne({ email: payload.email }).exec();\nexpect(user).not.to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17cadfdb-d810-46aa-a10f-4f750d216b24&quot;,&quot;parentUUID&quot;:&quot;8a788fe0-40cf-4e66-bbbe-85d6f8939a5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not accept registration with missing password&quot;,&quot;fullTitle&quot;:&quot;/users /register should not accept registration with missing password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:42,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete payload.password;\nconst response = await request\n    .post(registerUrl)\n    .type(&#x27;form&#x27;)\n    .send(payload);\nexpect(response).to.not.redirect;\nexpect(response).to.be.html;\nconst user = await User.findOne({ email: payload.email }).exec();\nexpect(user).not.to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f22c2278-416a-4e2a-b6a5-aaff59a62416&quot;,&quot;parentUUID&quot;:&quot;8a788fe0-40cf-4e66-bbbe-85d6f8939a5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not accept registration with too short password&quot;,&quot;fullTitle&quot;:&quot;/users /register should not accept registration with too short password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;payload.email = &#x27;1&#x27;;\nconst response = await request\n    .post(registerUrl)\n    .type(&#x27;form&#x27;)\n    .send(payload);\nexpect(response).to.not.redirect;\nexpect(response).to.be.html;\nconst user = await User.findOne({ email: payload.email }).exec();\nexpect(user).not.to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f0d30c3-a092-4196-b481-4ea715ce314f&quot;,&quot;parentUUID&quot;:&quot;8a788fe0-40cf-4e66-bbbe-85d6f8939a5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not accept registration with missing password confirmation&quot;,&quot;fullTitle&quot;:&quot;/users /register should not accept registration with missing password confirmation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:37,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete payload.passwordConfirmation;\nconst response = await request\n    .post(registerUrl)\n    .type(&#x27;form&#x27;)\n    .send(payload);\nexpect(response).to.not.redirect;\nexpect(response).to.be.html;\nconst user = await User.findOne({ email: payload.email }).exec();\nexpect(user).not.to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0064ef81-b80e-4f93-9bf8-07a2092cc725&quot;,&quot;parentUUID&quot;:&quot;8a788fe0-40cf-4e66-bbbe-85d6f8939a5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not accept registration with different password and confirmation&quot;,&quot;fullTitle&quot;:&quot;/users /register should not accept registration with different password and confirmation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;payload.passwordConfirmation = `${payload.password}sdfjkhasjkhf`;\nconst response = await request\n    .post(registerUrl)\n    .type(&#x27;form&#x27;)\n    .send(payload);\nexpect(response).to.not.redirect;\nexpect(response).to.be.html;\nconst user = await User.findOne({ email: payload.email }).exec();\nexpect(user).not.to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce314a90-3a70-40ba-afbd-05c7cd4cdd7c&quot;,&quot;parentUUID&quot;:&quot;8a788fe0-40cf-4e66-bbbe-85d6f8939a5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4fec78af-4710-45e7-95cc-81857017e7c2&quot;,&quot;68b64b9a-2dcc-49c6-8482-8d6485379510&quot;,&quot;85f5c335-b280-4fe6-bd60-b9b4c73f4497&quot;,&quot;e36d3b94-efe6-4e1c-8601-c173200d676b&quot;,&quot;17cadfdb-d810-46aa-a10f-4f750d216b24&quot;,&quot;f22c2278-416a-4e2a-b6a5-aaff59a62416&quot;,&quot;3f0d30c3-a092-4196-b481-4ea715ce314f&quot;,&quot;0064ef81-b80e-4f93-9bf8-07a2092cc725&quot;,&quot;ce314a90-3a70-40ba-afbd-05c7cd4cdd7c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1072,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;edaf3b4f-f808-4538-a44b-a0ca1f48dac4&quot;,&quot;title&quot;:&quot;/login&quot;,&quot;fullFile&quot;:&quot;/bwa/test/integration/users.test.js&quot;,&quot;file&quot;:&quot;/test/integration/users.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;/users /login \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request = chai.request.agent(app);\n// create a new copy of admin for each test\npayload = { ...admin };\ndelete payload.name;\ndelete payload.role;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;282fa749-934d-4e61-9d86-63fc988730a6&quot;,&quot;parentUUID&quot;:&quot;edaf3b4f-f808-4538-a44b-a0ca1f48dac4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;/users /login \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2273098-f147-4f43-bf24-fa7fb64f8aba&quot;,&quot;parentUUID&quot;:&quot;edaf3b4f-f808-4538-a44b-a0ca1f48dac4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not accept login with missing email&quot;,&quot;fullTitle&quot;:&quot;/users /login should not accept login with missing email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:37,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete payload.email;\nconst response = await request\n    .post(loginUrl)\n    .type(&#x27;form&#x27;)\n    .send(payload);\nexpect(response).to.redirectTo(/\\/users\\/login$/);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d8d2f33-885a-4744-bed2-16293317fe60&quot;,&quot;parentUUID&quot;:&quot;edaf3b4f-f808-4538-a44b-a0ca1f48dac4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not accept login with invalid email&quot;,&quot;fullTitle&quot;:&quot;/users /login should not accept login with invalid email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:39,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// remove &#x27;@&#x27; sing from email to intentionally make it invalid\npayload.email = payload.email.replace(&#x27;@&#x27;, &#x27;&#x27;);\nconst response = await request\n    .post(loginUrl)\n    .type(&#x27;form&#x27;)\n    .send(payload);\nexpect(response).to.redirectTo(/\\/users\\/login$/);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6caf8076-add5-456b-a003-e22ff55a7b68&quot;,&quot;parentUUID&quot;:&quot;edaf3b4f-f808-4538-a44b-a0ca1f48dac4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not accept login with wrong email&quot;,&quot;fullTitle&quot;:&quot;/users /login should not accept login with wrong email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:41,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// prepend one letter in front of the email to intentionally get it wrong\n// but keeping it still valid\npayload.email = `x${payload.email}`;\nconst response = await request\n    .post(loginUrl)\n    .type(&#x27;form&#x27;)\n    .send(payload);\nexpect(response).to.redirectTo(/\\/users\\/login$/);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;829d57fd-3cc0-4d91-ab86-002fa8e2aa51&quot;,&quot;parentUUID&quot;:&quot;edaf3b4f-f808-4538-a44b-a0ca1f48dac4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not accept login with missing password&quot;,&quot;fullTitle&quot;:&quot;/users /login should not accept login with missing password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:39,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete payload.password;\nconst response = await request\n    .post(loginUrl)\n    .type(&#x27;form&#x27;)\n    .send(payload);\nexpect(response).to.redirectTo(/\\/users\\/login$/);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;530bd076-cd04-4300-b49e-db0690477065&quot;,&quot;parentUUID&quot;:&quot;edaf3b4f-f808-4538-a44b-a0ca1f48dac4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not accept login with wrong password&quot;,&quot;fullTitle&quot;:&quot;/users /login should not accept login with wrong password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:230,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// reverse password to intentionally get it wrong\npayload.password = [...payload.password].reverse().join(&#x27;&#x27;);\nconst response = await request\n    .post(loginUrl)\n    .type(&#x27;form&#x27;)\n    .send(payload);\nexpect(response).to.redirectTo(/\\/users\\/login$/);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;87d35f6d-0139-48fa-bffa-a6c7c896d461&quot;,&quot;parentUUID&quot;:&quot;edaf3b4f-f808-4538-a44b-a0ca1f48dac4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should accept login with correct credentials&quot;,&quot;fullTitle&quot;:&quot;/users /login should accept login with correct credentials&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:245,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await request\n    .post(loginUrl)\n    .type(&#x27;form&#x27;)\n    .send(payload);\nexpect(response).to.have.cookie(&#x27;bwa&#x27;);\nexpect(response).to.redirectTo(/\\/$/);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;12c682d7-320c-410a-a397-4712abe22711&quot;,&quot;parentUUID&quot;:&quot;edaf3b4f-f808-4538-a44b-a0ca1f48dac4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should redirect to root \&quot;/\&quot; if already logged in&quot;,&quot;fullTitle&quot;:&quot;/users /login should redirect to root \&quot;/\&quot; if already logged in&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:295,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// log in\nlet response = await request\n    .post(loginUrl)\n    .type(&#x27;form&#x27;)\n    .send(payload);\nexpect(response).to.have.cookie(&#x27;bwa&#x27;);\nexpect(response).to.redirectTo(/\\/$/);\n// already logged in\nresponse = await request\n    .get(loginUrl);\nexpect(response).to.redirectTo(/\\/$/);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2eba567b-ef65-45de-9ed4-1e25cb9ea47d&quot;,&quot;parentUUID&quot;:&quot;edaf3b4f-f808-4538-a44b-a0ca1f48dac4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5d8d2f33-885a-4744-bed2-16293317fe60&quot;,&quot;6caf8076-add5-456b-a003-e22ff55a7b68&quot;,&quot;829d57fd-3cc0-4d91-ab86-002fa8e2aa51&quot;,&quot;530bd076-cd04-4300-b49e-db0690477065&quot;,&quot;87d35f6d-0139-48fa-bffa-a6c7c896d461&quot;,&quot;12c682d7-320c-410a-a397-4712abe22711&quot;,&quot;2eba567b-ef65-45de-9ed4-1e25cb9ea47d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:926,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;1351f601-024c-4527-bf2a-37e9f9a66d9e&quot;,&quot;title&quot;:&quot;Config&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/db.test.js&quot;,&quot;file&quot;:&quot;/test/models/db.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bedb4a7a-e640-41b1-93d3-dcf17ca0c8db&quot;,&quot;title&quot;:&quot;mongo config&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/db.test.js&quot;,&quot;file&quot;:&quot;/test/models/db.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;must have mongo key&quot;,&quot;fullTitle&quot;:&quot;Config mongo config must have mongo key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const mongoConfig = config.mongo;\nexpect(mongoConfig).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9c48710-a9a4-4222-952a-2ec143993470&quot;,&quot;parentUUID&quot;:&quot;bedb4a7a-e640-41b1-93d3-dcf17ca0c8db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must have a JSON object as a value&quot;,&quot;fullTitle&quot;:&quot;Config mongo config must have a JSON object as a value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const mongoConfig = config.mongo;\nexpect(mongoConfig).to.be.an(&#x27;object&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2653650c-4b19-4c7d-a3d2-ab0189f0c9b8&quot;,&quot;parentUUID&quot;:&quot;bedb4a7a-e640-41b1-93d3-dcf17ca0c8db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must define keys host, port, and db in the JSON object&quot;,&quot;fullTitle&quot;:&quot;Config mongo config must define keys host, port, and db in the JSON object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const mongoConfig = config.mongo;\nexpect(mongoConfig.host).to.exist;\nexpect(mongoConfig.port).to.exist;\nexpect(mongoConfig.db).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca0ba395-e1df-4d38-bd80-c5e57b292249&quot;,&quot;parentUUID&quot;:&quot;bedb4a7a-e640-41b1-93d3-dcf17ca0c8db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c9c48710-a9a4-4222-952a-2ec143993470&quot;,&quot;2653650c-4b19-4c7d-a3d2-ab0189f0c9b8&quot;,&quot;ca0ba395-e1df-4d38-bd80-c5e57b292249&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;89e3fb16-d9b6-4fec-8940-a5e2ca904c6b&quot;,&quot;title&quot;:&quot;db connection&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/db.test.js&quot;,&quot;file&quot;:&quot;/test/models/db.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;must be able to store data&quot;,&quot;fullTitle&quot;:&quot;Config db connection must be able to store data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:57,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dbConfig = config.get(&#x27;mongo&#x27;);\n            // connect to database\n            const db = require(&#x27;../../models/db&#x27;);\n            db.connectDB(dbConfig);\n            // const number=2;\n            const rawData = fs.readFileSync(path.resolve(__dirname, &#x27;../../setup/game.questionnaire.json&#x27;));\n            const data = JSON.parse(rawData);\n            const Questionnaire = require(&#x27;../../models/questionnaire&#x27;);\n            // delete old entries and from the database\n            await Questionnaire.deleteMany({}); //TODO - reconsider\n            // then add sample data to database\n            //TODO: ask the count before and after, the delta should be NUMBER_OF_QUESTIONS\n            await Questionnaire.create(data);\n            db.disconnectDB();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9557e8ea-71bc-48e5-9f11-6d0396f8929f&quot;,&quot;parentUUID&quot;:&quot;89e3fb16-d9b6-4fec-8940-a5e2ca904c6b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9557e8ea-71bc-48e5-9f11-6d0396f8929f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:57,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;9f7bbac2-5e82-490b-b545-e30b136e9c23&quot;,&quot;title&quot;:&quot;Hello&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/hello.test.js&quot;,&quot;file&quot;:&quot;/test/models/hello.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ff022dec-2c83-4fc7-a724-e498778d58ad&quot;,&quot;title&quot;:&quot;grade()&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/hello.test.js&quot;,&quot;file&quot;:&quot;/test/models/hello.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 0 (zero) if answer is not a string&quot;,&quot;fullTitle&quot;:&quot;Hello grade() should return 0 (zero) if answer is not a string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const answers = [1, null, undefined, {}, [], true, Symbol(), NaN];\nconst maxPoints = 2;\nanswers.forEach((answer) =&gt; {\n    const grade = Hello.grade(answer, maxPoints);\n    expect(grade).to.equal(0);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46ff56f6-538b-46e1-b30a-961a08713691&quot;,&quot;parentUUID&quot;:&quot;ff022dec-2c83-4fc7-a724-e498778d58ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 0 (zero) if maxPoints is not an integer&quot;,&quot;fullTitle&quot;:&quot;Hello grade() should return 0 (zero) if maxPoints is not an integer&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const answer = &#x27;HELLO A+&#x27;;\nconst points = [\n    &#x27;&#x27;,\n    1.1,\n    null,\n    undefined,\n    {},\n    [],\n    true,\n    Symbol(),\n    NaN\n];\npoints.forEach((maxPoints) =&gt; {\n    const grade = Hello.grade(answer, maxPoints);\n    expect(grade).to.equal(0);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f6511c2-ef8e-4a96-9186-d15a0f999683&quot;,&quot;parentUUID&quot;:&quot;ff022dec-2c83-4fc7-a724-e498778d58ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 0 (zero) if \&quot;maxPoints &lt; 2\&quot;&quot;,&quot;fullTitle&quot;:&quot;Hello grade() should return 0 (zero) if \&quot;maxPoints &lt; 2\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const answer = &#x27;HELLO A+&#x27;;\nconst points = [-1, 0, 1];\npoints.forEach((maxPoints) =&gt; {\n    const grade = Hello.grade(answer, maxPoints);\n    expect(grade).to.equal(0);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84f295ab-098c-4fbb-9c40-c2b461a075df&quot;,&quot;parentUUID&quot;:&quot;ff022dec-2c83-4fc7-a724-e498778d58ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 0 (zero) if \&quot;maxPoints is an odd number (not divisible by 2)\&quot;&quot;,&quot;fullTitle&quot;:&quot;Hello grade() should return 0 (zero) if \&quot;maxPoints is an odd number (not divisible by 2)\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const answer = &#x27;HELLO A+&#x27;;\nconst points = [3, 5, 7];\npoints.forEach((maxPoints) =&gt; {\n    const grade = Hello.grade(answer, maxPoints);\n    expect(grade).to.equal(0);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19c6f4e7-86a6-4d2a-b23b-e39607fac123&quot;,&quot;parentUUID&quot;:&quot;ff022dec-2c83-4fc7-a724-e498778d58ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 0 (zero) when answer is empty&quot;,&quot;fullTitle&quot;:&quot;Hello grade() should return 0 (zero) when answer is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const answer = &#x27;&#x27;;\nconst maxPoints = 2;\nconst grade = Hello.grade(answer, maxPoints);\nexpect(grade).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;292ff153-b4b3-44b2-bf17-aaf03287bbd3&quot;,&quot;parentUUID&quot;:&quot;ff022dec-2c83-4fc7-a724-e498778d58ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 0 (zero) when answer does not contain either \&quot;A+\&quot; or \&quot;HELLO\&quot;&quot;,&quot;fullTitle&quot;:&quot;Hello grade() should return 0 (zero) when answer does not contain either \&quot;A+\&quot; or \&quot;HELLO\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const answer = &#x27;x&#x27;;\nconst maxPoints = 2;\nconst grade = Hello.grade(answer, maxPoints);\nexpect(grade).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d047e61e-d9af-40a5-a8f2-b234ab0f61f1&quot;,&quot;parentUUID&quot;:&quot;ff022dec-2c83-4fc7-a724-e498778d58ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return maxPoints/2 when answer contains \&quot;A+\&quot; but not \&quot;HELLO\&quot;&quot;,&quot;fullTitle&quot;:&quot;Hello grade() should return maxPoints/2 when answer contains \&quot;A+\&quot; but not \&quot;HELLO\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const answers = [&#x27;a+&#x27;, &#x27;A+&#x27;, &#x27; a+&#x27;, &#x27;A+ &#x27;, &#x27; a+ &#x27;, &#x27;aA+a+Aa&#x27;];\nconst maxPoints = 2;\nanswers.forEach((answer) =&gt; {\n    const grade = Hello.grade(answer, maxPoints);\n    expect(grade).to.equal(maxPoints / 2);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d714bee0-7e3a-4b55-8b9a-d0060a70cd2a&quot;,&quot;parentUUID&quot;:&quot;ff022dec-2c83-4fc7-a724-e498778d58ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return maxPoints/2 when answer contains \&quot;HELLO\&quot; but not \&quot;A+\&quot;&quot;,&quot;fullTitle&quot;:&quot;Hello grade() should return maxPoints/2 when answer contains \&quot;HELLO\&quot; but not \&quot;A+\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const answers = [\n    &#x27;hello&#x27;,\n    &#x27;HELLO&#x27;,\n    &#x27; hello&#x27;,\n    &#x27;HELLO &#x27;,\n    &#x27; hello &#x27;,\n    &#x27;aAHelLoAa&#x27;\n];\nconst maxPoints = 2;\nanswers.forEach((answer) =&gt; {\n    const grade = Hello.grade(answer, maxPoints);\n    expect(grade).to.equal(maxPoints / 2);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d6a40f5-63ce-427a-9049-b60c55cfec09&quot;,&quot;parentUUID&quot;:&quot;ff022dec-2c83-4fc7-a724-e498778d58ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return maxPoints when answer contains both \&quot;A+\&quot; and \&quot;HELLO\&quot;&quot;,&quot;fullTitle&quot;:&quot;Hello grade() should return maxPoints when answer contains both \&quot;A+\&quot; and \&quot;HELLO\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const answers = [\n    &#x27;helloa+&#x27;,\n    &#x27;A+HELLO&#x27;,\n    &#x27;A+ hello&#x27;,\n    &#x27;HELLO a+&#x27;,\n    &#x27; a+ hello &#x27;,\n    &#x27;aA+HelLoAa&#x27;\n];\nconst maxPoints = 2;\nanswers.forEach((answer) =&gt; {\n    const grade = Hello.grade(answer, maxPoints);\n    expect(grade).to.equal(maxPoints);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85c1459a-4ad9-4c73-b8e0-1f08e3f658de&quot;,&quot;parentUUID&quot;:&quot;ff022dec-2c83-4fc7-a724-e498778d58ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;46ff56f6-538b-46e1-b30a-961a08713691&quot;,&quot;0f6511c2-ef8e-4a96-9186-d15a0f999683&quot;,&quot;84f295ab-098c-4fbb-9c40-c2b461a075df&quot;,&quot;19c6f4e7-86a6-4d2a-b23b-e39607fac123&quot;,&quot;292ff153-b4b3-44b2-bf17-aaf03287bbd3&quot;,&quot;d047e61e-d9af-40a5-a8f2-b234ab0f61f1&quot;,&quot;d714bee0-7e3a-4b55-8b9a-d0060a70cd2a&quot;,&quot;5d6a40f5-63ce-427a-9049-b60c55cfec09&quot;,&quot;85c1459a-4ad9-4c73-b8e0-1f08e3f658de&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;48f09137-d505-4434-b98f-69d084a59e74&quot;,&quot;title&quot;:&quot;Questionnaire&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/questionnaire.test.js&quot;,&quot;file&quot;:&quot;/test/models/questionnaire.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;80012240-ada7-415d-b476-75f8ec7351c4&quot;,&quot;title&quot;:&quot;Input validation&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/questionnaire.test.js&quot;,&quot;file&quot;:&quot;/test/models/questionnaire.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3a567de7-3257-4bb4-b0e7-ca587895f36d&quot;,&quot;title&quot;:&quot;validateOption()&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/questionnaire.test.js&quot;,&quot;file&quot;:&quot;/test/models/questionnaire.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateOption() \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// avoid object references and create copies\noption = { ...validOption };&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd854b92-791c-4831-8d5a-a4f556df9911&quot;,&quot;parentUUID&quot;:&quot;3a567de7-3257-4bb4-b0e7-ca587895f36d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;must validate \&quot;id\&quot; without errors&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateOption() must validate \&quot;id\&quot; without errors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;option.id = validId;\nconst { error } = Questionnaire.validateOption(option);\nexpect(error).not.to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ddc62f0-62ce-4905-bd2f-fbf97a0ca638&quot;,&quot;parentUUID&quot;:&quot;3a567de7-3257-4bb4-b0e7-ca587895f36d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must not accept invalid mongo objectId for \&quot;id\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateOption() must not accept invalid mongo objectId for \&quot;id\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;invalidIds.forEach((id) =&gt; {\n    option.id = id;\n    const { error } = Questionnaire.validateOption(option);\n    expect(error).to.exist;\n    expect(error).to.not.be.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be1ae944-04f6-46a8-b3b4-f5a07de87b57&quot;,&quot;parentUUID&quot;:&quot;3a567de7-3257-4bb4-b0e7-ca587895f36d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must allow \&quot;_id\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateOption() must allow \&quot;_id\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;option._id = validId;\nconst { error } = Questionnaire.validateOption(option);\nexpect(error).not.to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fbe9c4e7-07e8-4f51-839d-6ad6ab5db79c&quot;,&quot;parentUUID&quot;:&quot;3a567de7-3257-4bb4-b0e7-ca587895f36d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must not accept invalid or empty mongo objectId for \&quot;_id\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateOption() must not accept invalid or empty mongo objectId for \&quot;_id\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;invalidIds.forEach((id) =&gt; {\n    option._id = id;\n    const { error } = Questionnaire.validateOption(option);\n    expect(error).to.exist;\n    expect(error).to.not.be.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0e8ea92-3cc7-4f3b-9c0e-b952301290b4&quot;,&quot;parentUUID&quot;:&quot;3a567de7-3257-4bb4-b0e7-ca587895f36d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must not allow both \&quot;id\&quot; and \&quot;_id\&quot; at the same time&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateOption() must not allow both \&quot;id\&quot; and \&quot;_id\&quot; at the same time&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;option.id = validId;\noption._id = validId;\nconst { error } = Questionnaire.validateOption(option);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1439d9e4-6f46-434c-ac8a-2faeafd6cffe&quot;,&quot;parentUUID&quot;:&quot;3a567de7-3257-4bb4-b0e7-ca587895f36d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;allows both \&quot;id\&quot; and \&quot;_id\&quot; be missing at the same time&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateOption() allows both \&quot;id\&quot; and \&quot;_id\&quot; be missing at the same time&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { error } = Questionnaire.validateOption(option);\nexpect(error).not.to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9a778d3-5485-413e-9b5b-c9ffb6e1160d&quot;,&quot;parentUUID&quot;:&quot;3a567de7-3257-4bb4-b0e7-ca587895f36d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require \&quot;option\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateOption() should require \&quot;option\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete option.option;\nconst { error } = Questionnaire.validateOption(option);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f7bf114-a0ff-4e11-88ba-266831b25898&quot;,&quot;parentUUID&quot;:&quot;3a567de7-3257-4bb4-b0e7-ca587895f36d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should trim spaces from \&quot;option\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateOption() should trim spaces from \&quot;option\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;option.option = &#x27;  option     &#x27;;\nconst { error, value } = Questionnaire.validateOption(\n    option\n);\nexpect(error).not.to.exist;\nexpect(value).to.exist;\nexpect(value)\n    .to.be.an(&#x27;object&#x27;)\n    .that.has.a.property(&#x27;option&#x27;);\nexpect(value.option).to.equal(&#x27;option&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;752b1c9a-4df0-4534-aac9-7ab55e01a6e3&quot;,&quot;parentUUID&quot;:&quot;3a567de7-3257-4bb4-b0e7-ca587895f36d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow \&quot;option\&quot; to have only spaces&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateOption() should not allow \&quot;option\&quot; to have only spaces&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;option.option = &#x27;       &#x27;;\nconst { error } = Questionnaire.validateOption(option);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;92e1ec3e-b4b2-4c88-977f-c8ce061b567b&quot;,&quot;parentUUID&quot;:&quot;3a567de7-3257-4bb4-b0e7-ca587895f36d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require \&quot;option\&quot; to be at least one character long&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateOption() should require \&quot;option\&quot; to be at least one character long&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;option.option = &#x27;&#x27;;\nconst { error } = Questionnaire.validateOption(option);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;\noption.option = &#x27;A&#x27;;\nconst { error: notError } = Questionnaire.validateOption(\n    option\n);\nexpect(notError).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b0281bf9-3ede-476f-90d3-a167b9dd31d5&quot;,&quot;parentUUID&quot;:&quot;3a567de7-3257-4bb4-b0e7-ca587895f36d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow \&quot;option\&quot; to be longer than 50 characters&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateOption() should not allow \&quot;option\&quot; to be longer than 50 characters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;option.option =\n    &#x27;Very long text value that is over fifty characters long!&#x27;;\nconst { error } = Questionnaire.validateOption(option);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b23e8746-7217-475b-93c8-bdea93c16dd1&quot;,&quot;parentUUID&quot;:&quot;3a567de7-3257-4bb4-b0e7-ca587895f36d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow a dollar sign ($) inside \&quot;option\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateOption() should not allow a dollar sign ($) inside \&quot;option\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;option.option = dollarMsg;\nconst { error } = Questionnaire.validateOption(option);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16544cb5-3d35-48c4-971f-55cee88923fc&quot;,&quot;parentUUID&quot;:&quot;3a567de7-3257-4bb4-b0e7-ca587895f36d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow missing \&quot;hint\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateOption() should allow missing \&quot;hint\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete option.hint;\nconst { error } = Questionnaire.validateOption(option);\nexpect(error).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6276fef-f097-423b-ab85-4912c7fc4093&quot;,&quot;parentUUID&quot;:&quot;3a567de7-3257-4bb4-b0e7-ca587895f36d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow empty \&quot;hint\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateOption() should allow empty \&quot;hint\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;option.hint = &#x27;&#x27;;\nconst { error } = Questionnaire.validateOption(option);\nexpect(error).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76b0d12c-92c7-4048-aa66-8a34b23ce029&quot;,&quot;parentUUID&quot;:&quot;3a567de7-3257-4bb4-b0e7-ca587895f36d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should trim spaces from \&quot;hint\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateOption() should trim spaces from \&quot;hint\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;option.hint = &#x27;  hint     &#x27;;\nconst { error, value } = Questionnaire.validateOption(\n    option\n);\nexpect(error).not.to.exist;\nexpect(value).to.exist;\nexpect(value)\n    .to.be.an(&#x27;object&#x27;)\n    .that.has.a.property(&#x27;hint&#x27;);\nexpect(value.hint).to.equal(&#x27;hint&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fbde9fd-f20a-4391-96a2-00eaaad4b46d&quot;,&quot;parentUUID&quot;:&quot;3a567de7-3257-4bb4-b0e7-ca587895f36d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow a dollar sign ($) inside \&quot;hint\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateOption() should not allow a dollar sign ($) inside \&quot;hint\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;option.hint = dollarMsg;\nconst { error } = Questionnaire.validateOption(option);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f9963640-a2a6-4a84-9766-0efda0ab8f72&quot;,&quot;parentUUID&quot;:&quot;3a567de7-3257-4bb4-b0e7-ca587895f36d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits \&quot;hint\&quot; to 100 characters&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateOption() limits \&quot;hint\&quot; to 100 characters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;option.hint = `${&#x27;happy&#x27;.repeat(20)  }y`;\nconst { error } = Questionnaire.validateOption(option);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4f7e91e-bcf8-4c2d-93e0-1640e758d36a&quot;,&quot;parentUUID&quot;:&quot;3a567de7-3257-4bb4-b0e7-ca587895f36d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow missing \&quot;correctness\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateOption() should not allow missing \&quot;correctness\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete option.correctness;\nconst { error } = Questionnaire.validateOption(option);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81391299-53c3-4eaf-b9db-0f9ba6fbb43d&quot;,&quot;parentUUID&quot;:&quot;3a567de7-3257-4bb4-b0e7-ca587895f36d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow empty \&quot;correctness\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateOption() should not allow empty \&quot;correctness\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const empties = [null, undefined, &#x27;&#x27;];\nempties.forEach((val) =&gt; {\n    option.correctness = val;\n    const { error } = Questionnaire.validateOption(option);\n    expect(error).to.exist;\n    expect(error).to.not.be.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d7ebd83-93f3-4290-89c4-d17dc2f8d57e&quot;,&quot;parentUUID&quot;:&quot;3a567de7-3257-4bb4-b0e7-ca587895f36d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow booleans for \&quot;correctness\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateOption() should allow booleans for \&quot;correctness\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const values = [true, false];\nvalues.forEach((val) =&gt; {\n    option.correctness = val;\n    const { error } = Questionnaire.validateOption(option);\n    expect(error).to.not.exist;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b2aecae9-6f7c-4c25-aef2-c1f22a538963&quot;,&quot;parentUUID&quot;:&quot;3a567de7-3257-4bb4-b0e7-ca587895f36d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow predefined truthy and falsy values for \&quot;correctness\&quot; and convert them to booleans&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateOption() should allow predefined truthy and falsy values for \&quot;correctness\&quot; and convert them to booleans&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const trueValues = [&#x27;t&#x27;, &#x27;y&#x27;, &#x27;yes&#x27;, &#x27;1&#x27;, 1];\nconst falseValues = [&#x27;f&#x27;, &#x27;n&#x27;, &#x27;no&#x27;, &#x27;0&#x27;, 0];\ntrueValues.forEach((val) =&gt; {\n    option.correctness = val;\n    const {\n        error: trueError,\n        value: trueValue\n    } = Questionnaire.validateOption(option);\n    expect(trueError).to.not.exist;\n    expect(trueValue).to.exist;\n    expect(trueValue)\n        .to.be.an(&#x27;object&#x27;)\n        .that.has.a.property(&#x27;correctness&#x27;);\n    expect(trueValue.correctness).to.be.true;\n});\nfalseValues.forEach((val) =&gt; {\n    option.correctness = val;\n    const {\n        error: falseError,\n        value: falseValue\n    } = Questionnaire.validateOption(option);\n    expect(falseError).to.not.exist;\n    expect(falseValue).to.exist;\n    expect(falseValue)\n        .to.be.an(&#x27;object&#x27;)\n        .that.has.a.property(&#x27;correctness&#x27;);\n    expect(falseValue.correctness).to.be.false;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f7498f5-d656-4bc5-9d48-d1c75a87b1c4&quot;,&quot;parentUUID&quot;:&quot;3a567de7-3257-4bb4-b0e7-ca587895f36d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3ddc62f0-62ce-4905-bd2f-fbf97a0ca638&quot;,&quot;be1ae944-04f6-46a8-b3b4-f5a07de87b57&quot;,&quot;fbe9c4e7-07e8-4f51-839d-6ad6ab5db79c&quot;,&quot;d0e8ea92-3cc7-4f3b-9c0e-b952301290b4&quot;,&quot;1439d9e4-6f46-434c-ac8a-2faeafd6cffe&quot;,&quot;b9a778d3-5485-413e-9b5b-c9ffb6e1160d&quot;,&quot;8f7bf114-a0ff-4e11-88ba-266831b25898&quot;,&quot;752b1c9a-4df0-4534-aac9-7ab55e01a6e3&quot;,&quot;92e1ec3e-b4b2-4c88-977f-c8ce061b567b&quot;,&quot;b0281bf9-3ede-476f-90d3-a167b9dd31d5&quot;,&quot;b23e8746-7217-475b-93c8-bdea93c16dd1&quot;,&quot;16544cb5-3d35-48c4-971f-55cee88923fc&quot;,&quot;d6276fef-f097-423b-ab85-4912c7fc4093&quot;,&quot;76b0d12c-92c7-4048-aa66-8a34b23ce029&quot;,&quot;8fbde9fd-f20a-4391-96a2-00eaaad4b46d&quot;,&quot;f9963640-a2a6-4a84-9766-0efda0ab8f72&quot;,&quot;d4f7e91e-bcf8-4c2d-93e0-1640e758d36a&quot;,&quot;81391299-53c3-4eaf-b9db-0f9ba6fbb43d&quot;,&quot;7d7ebd83-93f3-4290-89c4-d17dc2f8d57e&quot;,&quot;b2aecae9-6f7c-4c25-aef2-c1f22a538963&quot;,&quot;0f7498f5-d656-4bc5-9d48-d1c75a87b1c4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:40,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;bc41c6cc-a270-4d8d-98dd-81547fd24470&quot;,&quot;title&quot;:&quot;validateQuestion()&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/questionnaire.test.js&quot;,&quot;file&quot;:&quot;/test/models/questionnaire.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestion() \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// avoid object references and create copies\noptions = validOptions.map((opt) =&gt; {\n    return { ...opt };\n});\nquestion = { ...validQuestion };&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d3ea1225-49e3-4a92-9318-e3d8ac309dbc&quot;,&quot;parentUUID&quot;:&quot;bc41c6cc-a270-4d8d-98dd-81547fd24470&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should allow \&quot;id\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestion() should allow \&quot;id\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;question.id = validId;\nconst { error } = Questionnaire.validateQuestion(question);\nexpect(error).not.to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db92d6bd-f8ab-4c30-8dad-94b81afd26d1&quot;,&quot;parentUUID&quot;:&quot;bc41c6cc-a270-4d8d-98dd-81547fd24470&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not accept invalid mongo objectId for \&quot;id\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestion() should not accept invalid mongo objectId for \&quot;id\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;invalidIds.forEach((id) =&gt; {\n    question.id = id;\n    const { error } = Questionnaire.validateQuestion(\n        question\n    );\n    expect(error).to.exist;\n    expect(error).to.not.be.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef5b274c-8d15-4672-967c-59d32556c8bb&quot;,&quot;parentUUID&quot;:&quot;bc41c6cc-a270-4d8d-98dd-81547fd24470&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow \&quot;_id\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestion() should allow \&quot;_id\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;question._id = validId;\nconst { error } = Questionnaire.validateQuestion(question);\nexpect(error).not.to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1de4cdc6-a5e4-4607-9620-e0a6d0c244da&quot;,&quot;parentUUID&quot;:&quot;bc41c6cc-a270-4d8d-98dd-81547fd24470&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not accept invalid mongo objectId for \&quot;_id\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestion() should not accept invalid mongo objectId for \&quot;_id\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;invalidIds.forEach((id) =&gt; {\n    question._id = id;\n    const { error } = Questionnaire.validateQuestion(\n        question\n    );\n    expect(error).to.exist;\n    expect(error).to.not.be.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53fa27a4-51ec-4164-976d-b438b588cc31&quot;,&quot;parentUUID&quot;:&quot;bc41c6cc-a270-4d8d-98dd-81547fd24470&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow both \&quot;id\&quot; and \&quot;_id\&quot; at the same time&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestion() should not allow both \&quot;id\&quot; and \&quot;_id\&quot; at the same time&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;question.id = validId;\nquestion._id = validId;\nconst { error } = Questionnaire.validateQuestion(question);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10575485-4b91-4bed-9bac-64178358224f&quot;,&quot;parentUUID&quot;:&quot;bc41c6cc-a270-4d8d-98dd-81547fd24470&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow both \&quot;id\&quot; and \&quot;_id\&quot; be missing at the same time&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestion() should allow both \&quot;id\&quot; and \&quot;_id\&quot; be missing at the same time&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { error } = Questionnaire.validateQuestion(question);\nexpect(error).not.to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9365c9d7-cc18-4469-91b8-e96e45f9157e&quot;,&quot;parentUUID&quot;:&quot;bc41c6cc-a270-4d8d-98dd-81547fd24470&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must require \&quot;title\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestion() must require \&quot;title\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete question.title;\nconst { error } = Questionnaire.validateQuestion(question);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4433c67-36c0-4c38-93ae-f9396185ddcf&quot;,&quot;parentUUID&quot;:&quot;bc41c6cc-a270-4d8d-98dd-81547fd24470&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;trims spaces from question \&quot;title\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestion() trims spaces from question \&quot;title\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;question.title = &#x27;  question     &#x27;;\nconst { error, value } = Questionnaire.validateQuestion(\n    question\n);\nexpect(error).not.to.exist;\nexpect(value).to.exist;\nexpect(value)\n    .to.be.an(&#x27;object&#x27;)\n    .that.has.a.property(&#x27;title&#x27;);\nexpect(value.title).to.equal(&#x27;question&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38e89406-4610-4839-842e-67810cd326b5&quot;,&quot;parentUUID&quot;:&quot;bc41c6cc-a270-4d8d-98dd-81547fd24470&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must not allow \&quot;title\&quot; with spaces only&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestion() must not allow \&quot;title\&quot; with spaces only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;question.title = &#x27; &#x27;.repeat(7);\n                const { error } = Questionnaire.validateQuestion(question);\n                expect(error).to.exist;\n                expect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88c8c9a7-6ae7-438a-87b9-149965727f85&quot;,&quot;parentUUID&quot;:&quot;bc41c6cc-a270-4d8d-98dd-81547fd24470&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;requires \&quot;title\&quot; to be at least one character long&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestion() requires \&quot;title\&quot; to be at least one character long&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;question.title = &#x27;&#x27;;\nconst { error } = Questionnaire.validateQuestion(question);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;\nquestion.title = &#x27;A&#x27;;\nconst { error: notError } = Questionnaire.validateQuestion(\n    question\n);\nexpect(notError).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13c3573b-139d-4763-b8f7-3cb2c9359b80&quot;,&quot;parentUUID&quot;:&quot;bc41c6cc-a270-4d8d-98dd-81547fd24470&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must not allow \&quot;title\&quot; to be longer than 100 characters&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestion() must not allow \&quot;title\&quot; to be longer than 100 characters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;question.title = `${&#x27;happy&#x27;.repeat(20)}y`;\nconst { error } = Questionnaire.validateQuestion(question);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;482daae0-98fc-48fb-a30f-97e246ac4ea7&quot;,&quot;parentUUID&quot;:&quot;bc41c6cc-a270-4d8d-98dd-81547fd24470&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow text value with a dollar($) sign in title&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestion() should not allow text value with a dollar($) sign in title&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;question.title = dollarMsg;\nconst { error } = Questionnaire.validateQuestion(question);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e413fdb8-958e-47eb-a4a2-4f572c872ae7&quot;,&quot;parentUUID&quot;:&quot;bc41c6cc-a270-4d8d-98dd-81547fd24470&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require \&quot;maxPoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestion() should require \&quot;maxPoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete question.maxPoints;\nconst { error } = Questionnaire.validateQuestion(question);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;426f7a25-004a-483d-b1a8-682c3a015ccd&quot;,&quot;parentUUID&quot;:&quot;bc41c6cc-a270-4d8d-98dd-81547fd24470&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only allow integers for \&quot;maxPoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestion() should only allow integers for \&quot;maxPoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;invalidIntegers.forEach((invalidInt) =&gt; {\n    question.maxPoints = invalidInt;\n    const { error } = Questionnaire.validateQuestion(\n        question\n    );\n    expect(error).to.exist;\n    expect(error).to.not.be.empty;\n});\nvalidIntegers.forEach((validInt) =&gt; {\n    question.maxPoints = validInt;\n    const {\n        error,\n        value\n    } = Questionnaire.validateQuestion(question);\n    expect(error).to.not.exist;\n    expect(value).to.exist;\n    expect(value)\n        .to.be.an(&#x27;object&#x27;)\n        .that.has.a.property(&#x27;maxPoints&#x27;);\n    expect(value.maxPoints).to.equal(Number(validInt));\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff6b8bdf-40a7-4f54-a0ab-f6677fd12960&quot;,&quot;parentUUID&quot;:&quot;bc41c6cc-a270-4d8d-98dd-81547fd24470&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow only positive integers for \&quot;maxPoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestion() should allow only positive integers for \&quot;maxPoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const maxPoints = [-1, 0];\nmaxPoints.forEach((maximum) =&gt; {\n    question.maxPoints = maximum;\n    const { error } = Questionnaire.validateQuestion(\n        question\n    );\n    expect(error).to.exist;\n    expect(error).to.not.be.empty;\n});\nquestion.maxPoints = 1;\nconst { error } = Questionnaire.validateQuestion(question);\nexpect(error).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9768f5f7-6760-494e-a289-d8a7290447b2&quot;,&quot;parentUUID&quot;:&quot;bc41c6cc-a270-4d8d-98dd-81547fd24470&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require \&quot;options\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestion() should require \&quot;options\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete question.options;\nconst { error } = Questionnaire.validateQuestion(question);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2bb4a960-af2f-4202-b088-aeafb65ebf94&quot;,&quot;parentUUID&quot;:&quot;bc41c6cc-a270-4d8d-98dd-81547fd24470&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require atleast two \&quot;options\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestion() should require atleast two \&quot;options\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;question.options = [];\nconst { error } = Questionnaire.validateQuestion(question);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;\noptions.forEach((opt) =&gt; {\n    question.options = [opt];\n    const {\n        error: optError\n    } = Questionnaire.validateQuestion(question);\n    expect(optError).to.exist;\n    expect(optError).to.not.be.empty;\n});\nquestion.options = options;\nconst { error: notError } = Questionnaire.validateQuestion(\n    question\n);\nexpect(notError).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38548cb1-7702-4dae-965b-0f4af104ed0f&quot;,&quot;parentUUID&quot;:&quot;bc41c6cc-a270-4d8d-98dd-81547fd24470&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require atleast one correct answer in \&quot;options\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestion() should require atleast one correct answer in \&quot;options\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const incorrectAnswers = options.map((opt) =&gt; {\n    opt.correctness = false;\n    return opt;\n});\nquestion.options = incorrectAnswers;\nconst { error } = Questionnaire.validateQuestion(question);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd96d991-17bb-4bb2-b387-c4ca841d4631&quot;,&quot;parentUUID&quot;:&quot;bc41c6cc-a270-4d8d-98dd-81547fd24470&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;db92d6bd-f8ab-4c30-8dad-94b81afd26d1&quot;,&quot;ef5b274c-8d15-4672-967c-59d32556c8bb&quot;,&quot;1de4cdc6-a5e4-4607-9620-e0a6d0c244da&quot;,&quot;53fa27a4-51ec-4164-976d-b438b588cc31&quot;,&quot;10575485-4b91-4bed-9bac-64178358224f&quot;,&quot;9365c9d7-cc18-4469-91b8-e96e45f9157e&quot;,&quot;d4433c67-36c0-4c38-93ae-f9396185ddcf&quot;,&quot;38e89406-4610-4839-842e-67810cd326b5&quot;,&quot;88c8c9a7-6ae7-438a-87b9-149965727f85&quot;,&quot;13c3573b-139d-4763-b8f7-3cb2c9359b80&quot;,&quot;482daae0-98fc-48fb-a30f-97e246ac4ea7&quot;,&quot;e413fdb8-958e-47eb-a4a2-4f572c872ae7&quot;,&quot;426f7a25-004a-483d-b1a8-682c3a015ccd&quot;,&quot;ff6b8bdf-40a7-4f54-a0ab-f6677fd12960&quot;,&quot;9768f5f7-6760-494e-a289-d8a7290447b2&quot;,&quot;2bb4a960-af2f-4202-b088-aeafb65ebf94&quot;,&quot;38548cb1-7702-4dae-965b-0f4af104ed0f&quot;,&quot;dd96d991-17bb-4bb2-b387-c4ca841d4631&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:59,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;4bb48cda-6f8a-4e09-8b15-dcba11db2ec1&quot;,&quot;title&quot;:&quot;validateQuestionnaire()&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/questionnaire.test.js&quot;,&quot;file&quot;:&quot;/test/models/questionnaire.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestionnaire() \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// avoid object references and create copies\nquestions = [...validQuestions];\nquestionnaire = { ...validQuestionnaire };&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14e05dca-0c26-4308-89f4-8147708308aa&quot;,&quot;parentUUID&quot;:&quot;4bb48cda-6f8a-4e09-8b15-dcba11db2ec1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should allow \&quot;id\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestionnaire() should allow \&quot;id\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.id = validId;\nconst { error } = Questionnaire.validateQuestionnaire(\n    questionnaire\n);\nexpect(error).not.to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;575dbc2b-d964-469e-b941-1d959f7715e0&quot;,&quot;parentUUID&quot;:&quot;4bb48cda-6f8a-4e09-8b15-dcba11db2ec1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not accept invalid mongo objectId for \&quot;id\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestionnaire() should not accept invalid mongo objectId for \&quot;id\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;invalidIds.forEach((id) =&gt; {\n    questionnaire.id = id;\n    const { error } = Questionnaire.validateQuestionnaire(\n        questionnaire\n    );\n    expect(error).to.exist;\n    expect(error).to.not.be.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a0adc4f-e265-4773-b49f-26000d9ee6f9&quot;,&quot;parentUUID&quot;:&quot;4bb48cda-6f8a-4e09-8b15-dcba11db2ec1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow \&quot;_id\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestionnaire() should allow \&quot;_id\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire._id = validId;\nconst { error } = Questionnaire.validateQuestionnaire(\n    questionnaire\n);\nexpect(error).not.to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e450b6e-5e19-4e2f-85aa-d75cbc9209c6&quot;,&quot;parentUUID&quot;:&quot;4bb48cda-6f8a-4e09-8b15-dcba11db2ec1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not accept invalid mongo objectId for \&quot;_id\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestionnaire() should not accept invalid mongo objectId for \&quot;_id\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;invalidIds.forEach((id) =&gt; {\n    questionnaire._id = id;\n    const { error } = Questionnaire.validateQuestionnaire(\n        questionnaire\n    );\n    expect(error).to.exist;\n    expect(error).to.not.be.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4515368a-95fe-4407-80c5-29db74a925bc&quot;,&quot;parentUUID&quot;:&quot;4bb48cda-6f8a-4e09-8b15-dcba11db2ec1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow both \&quot;id\&quot; and \&quot;_id\&quot; at the same time&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestionnaire() should not allow both \&quot;id\&quot; and \&quot;_id\&quot; at the same time&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.id = validId;\nquestionnaire._id = validId;\nconst { error } = Questionnaire.validateQuestionnaire(\n    questionnaire\n);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;851e9219-3c1a-4713-a860-97ad323e7b23&quot;,&quot;parentUUID&quot;:&quot;4bb48cda-6f8a-4e09-8b15-dcba11db2ec1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow both \&quot;id\&quot; and \&quot;_id\&quot; be missing at the same time&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestionnaire() should allow both \&quot;id\&quot; and \&quot;_id\&quot; be missing at the same time&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { error } = Questionnaire.validateQuestionnaire(\n    questionnaire\n);\nexpect(error).not.to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1411d07-272b-41ef-bf5c-3abb84fa8981&quot;,&quot;parentUUID&quot;:&quot;4bb48cda-6f8a-4e09-8b15-dcba11db2ec1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must require \&quot;title\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestionnaire() must require \&quot;title\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete questionnaire.title;\nconst { error } = Questionnaire.validateQuestionnaire(\n    questionnaire\n);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5dc65f7d-8a3d-4904-b091-4668533fae57&quot;,&quot;parentUUID&quot;:&quot;4bb48cda-6f8a-4e09-8b15-dcba11db2ec1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;trims spaces from \&quot;title\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestionnaire() trims spaces from \&quot;title\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.title = &#x27;  title     &#x27;;\nconst {\n    error,\n    value\n} = Questionnaire.validateQuestionnaire(questionnaire);\nexpect(error).not.to.exist;\nexpect(value).to.exist;\nexpect(value)\n    .to.be.an(&#x27;object&#x27;)\n    .that.has.a.property(&#x27;title&#x27;);\nexpect(value.title).to.equal(&#x27;title&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cbc50e32-301d-40fd-bdec-72e8df14d2c3&quot;,&quot;parentUUID&quot;:&quot;4bb48cda-6f8a-4e09-8b15-dcba11db2ec1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must not allow \&quot;title\&quot; to have only spaces&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestionnaire() must not allow \&quot;title\&quot; to have only spaces&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.title = &#x27;       &#x27;;\nconst { error } = Questionnaire.validateQuestionnaire(\n    questionnaire\n);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8acdc12b-62b8-49c3-9b95-2a47086b76d1&quot;,&quot;parentUUID&quot;:&quot;4bb48cda-6f8a-4e09-8b15-dcba11db2ec1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require \&quot;title\&quot; to be longer than zero&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestionnaire() should require \&quot;title\&quot; to be longer than zero&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.title = &#x27;&#x27;;\nconst { error } = Questionnaire.validateQuestionnaire(\n    questionnaire\n);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;\nquestionnaire.title = &#x27;A&#x27;;\nconst {\n    error: notError\n} = Questionnaire.validateQuestionnaire(questionnaire);\nexpect(notError).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d67d25d-4229-4a40-9d92-62133bb8d97f&quot;,&quot;parentUUID&quot;:&quot;4bb48cda-6f8a-4e09-8b15-dcba11db2ec1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow \&quot;title\&quot; to &gt; 100 characters&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestionnaire() should not allow \&quot;title\&quot; to &gt; 100 characters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.title = `${&#x27;happy&#x27;.repeat(20)}y`;\nconst { error } = Questionnaire.validateQuestionnaire(\n    questionnaire\n);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c25972b6-d3e8-413d-a762-f8c83ce17f40&quot;,&quot;parentUUID&quot;:&quot;4bb48cda-6f8a-4e09-8b15-dcba11db2ec1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow a dollar sign ($) inside \&quot;title\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestionnaire() should not allow a dollar sign ($) inside \&quot;title\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.title = dollarMsg;\nconst { error } = Questionnaire.validateQuestionnaire(\n    questionnaire\n);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b8829a1-e99d-4bb7-acb5-840db335b4f8&quot;,&quot;parentUUID&quot;:&quot;4bb48cda-6f8a-4e09-8b15-dcba11db2ec1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require \&quot;submissions\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestionnaire() should require \&quot;submissions\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete questionnaire.submissions;\nconst { error } = Questionnaire.validateQuestionnaire(questionnaire);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e96f12a2-cf73-452a-ba3e-9627901c994c&quot;,&quot;parentUUID&quot;:&quot;4bb48cda-6f8a-4e09-8b15-dcba11db2ec1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only allow integers for \&quot;submissions\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestionnaire() should only allow integers for \&quot;submissions\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;invalidIntegers.forEach((invalidInt) =&gt; {\n    questionnaire.submissions = invalidInt;\n    const { error } = Questionnaire.validateQuestionnaire(\n        questionnaire\n    );\n    expect(error).to.exist;\n    expect(error).to.not.be.empty;\n});\nvalidIntegers.forEach((validInt) =&gt; {\n    questionnaire.submissions = validInt;\n    const {\n        error,\n        value\n    } = Questionnaire.validateQuestionnaire(questionnaire);\n    expect(error).to.not.exist;\n    expect(value).to.exist;\n    expect(value)\n        .to.be.an(&#x27;object&#x27;)\n        .that.has.a.property(&#x27;submissions&#x27;);\n    expect(value.submissions).to.equal(Number(validInt));\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14465243-de0b-477a-b339-314ec9222304&quot;,&quot;parentUUID&quot;:&quot;4bb48cda-6f8a-4e09-8b15-dcba11db2ec1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow only positive integers for \&quot;submissions\&quot;  that can be ensured by defining min: 1 in the schema&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestionnaire() should allow only positive integers for \&quot;submissions\&quot;  that can be ensured by defining min: 1 in the schema&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const submissions = [-1, 0];\nsubmissions.forEach((submission) =&gt; {\n    questionnaire.submissions = submission;\n    const { error } = Questionnaire.validateQuestionnaire(\n        questionnaire\n    );\n    expect(error).to.exist;\n    expect(error).to.not.be.empty;\n});\nquestionnaire.submissions = 1;\nconst { error } = Questionnaire.validateQuestionnaire(questionnaire);\nexpect(error).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;62a88ea8-bbbf-440b-95e1-ff3c2ec54978&quot;,&quot;parentUUID&quot;:&quot;4bb48cda-6f8a-4e09-8b15-dcba11db2ec1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require \&quot;questions\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestionnaire() should require \&quot;questions\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete questionnaire.questions;\nconst { error } = Questionnaire.validateQuestionnaire(\n    questionnaire\n);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a43e1a9-a104-44f2-b0cd-9ed630ee7e45&quot;,&quot;parentUUID&quot;:&quot;4bb48cda-6f8a-4e09-8b15-dcba11db2ec1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require \&quot;questions\&quot; to not be empty&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestionnaire() should require \&quot;questions\&quot; to not be empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.questions = [];\nconst { error } = Questionnaire.validateQuestionnaire(\n    questionnaire\n);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a90cfe8-12f2-4450-aeee-91c07a5cff93&quot;,&quot;parentUUID&quot;:&quot;4bb48cda-6f8a-4e09-8b15-dcba11db2ec1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow multiple \&quot;questions\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateQuestionnaire() should allow multiple \&quot;questions\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.questions = questions;\nconst {\n    error: notError\n} = Questionnaire.validateQuestionnaire(questionnaire);\nexpect(notError).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5feb9390-c245-475a-9962-f3ccf8defb10&quot;,&quot;parentUUID&quot;:&quot;4bb48cda-6f8a-4e09-8b15-dcba11db2ec1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;575dbc2b-d964-469e-b941-1d959f7715e0&quot;,&quot;4a0adc4f-e265-4773-b49f-26000d9ee6f9&quot;,&quot;2e450b6e-5e19-4e2f-85aa-d75cbc9209c6&quot;,&quot;4515368a-95fe-4407-80c5-29db74a925bc&quot;,&quot;851e9219-3c1a-4713-a860-97ad323e7b23&quot;,&quot;f1411d07-272b-41ef-bf5c-3abb84fa8981&quot;,&quot;5dc65f7d-8a3d-4904-b091-4668533fae57&quot;,&quot;cbc50e32-301d-40fd-bdec-72e8df14d2c3&quot;,&quot;8acdc12b-62b8-49c3-9b95-2a47086b76d1&quot;,&quot;4d67d25d-4229-4a40-9d92-62133bb8d97f&quot;,&quot;c25972b6-d3e8-413d-a762-f8c83ce17f40&quot;,&quot;5b8829a1-e99d-4bb7-acb5-840db335b4f8&quot;,&quot;e96f12a2-cf73-452a-ba3e-9627901c994c&quot;,&quot;14465243-de0b-477a-b339-314ec9222304&quot;,&quot;62a88ea8-bbbf-440b-95e1-ff3c2ec54978&quot;,&quot;7a43e1a9-a104-44f2-b0cd-9ed630ee7e45&quot;,&quot;0a90cfe8-12f2-4450-aeee-91c07a5cff93&quot;,&quot;5feb9390-c245-475a-9962-f3ccf8defb10&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:71,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;51588366-5861-417b-8fa5-6b1c03c7dce6&quot;,&quot;title&quot;:&quot;validateSearch()&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/questionnaire.test.js&quot;,&quot;file&quot;:&quot;/test/models/questionnaire.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateSearch() \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// avoid object references and create copies\nconst validSearch = {\n    title: &#x27;title&#x27;\n};\nsearch = { ...validSearch };&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c375387-a03e-4543-8141-b897e76e18ee&quot;,&quot;parentUUID&quot;:&quot;51588366-5861-417b-8fa5-6b1c03c7dce6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not allow missing \&quot;title\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateSearch() should not allow missing \&quot;title\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete search.title;\nconst { error } = Questionnaire.validateSearch(search);\nexpect(error).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c47bca77-a8d0-4279-8080-1fd55f132395&quot;,&quot;parentUUID&quot;:&quot;51588366-5861-417b-8fa5-6b1c03c7dce6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;trims spaces from \&quot;title\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateSearch() trims spaces from \&quot;title\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;search.title = &#x27;  title     &#x27;;\nconst { error, value } = Questionnaire.validateSearch(\n    search\n);\nexpect(error).not.to.exist;\nexpect(value).to.exist;\nexpect(value)\n    .to.be.an(&#x27;object&#x27;)\n    .that.has.a.property(&#x27;title&#x27;);\nexpect(value.title).to.equal(&#x27;title&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eeb115d9-715a-4cb4-b2a9-1f16a70658cf&quot;,&quot;parentUUID&quot;:&quot;51588366-5861-417b-8fa5-6b1c03c7dce6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must not allow \&quot;title\&quot; to have only spaces&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateSearch() must not allow \&quot;title\&quot; to have only spaces&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;search.title = &#x27;       &#x27;;\nconst { error } = Questionnaire.validateSearch(search);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da19b31d-787c-4802-90d9-6b572660f8a9&quot;,&quot;parentUUID&quot;:&quot;51588366-5861-417b-8fa5-6b1c03c7dce6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require \&quot;title\&quot; to be atleast one character long&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateSearch() should require \&quot;title\&quot; to be atleast one character long&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;search.title = &#x27;&#x27;;\nconst { error } = Questionnaire.validateSearch(search);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;\nsearch.title = &#x27;A&#x27;;\nconst { error: notError } = Questionnaire.validateSearch(\n    search\n);\nexpect(notError).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6cde9b3f-cdb9-4e4d-8397-56e5b335779d&quot;,&quot;parentUUID&quot;:&quot;51588366-5861-417b-8fa5-6b1c03c7dce6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow \&quot;title\&quot; &gt; 100 characters&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateSearch() should not allow \&quot;title\&quot; &gt; 100 characters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;search.title = `${&#x27;happy&#x27;.repeat(20)}y`;\nconst { error } = Questionnaire.validateSearch(search);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4bf829fc-4389-4e4a-9778-39b5d15e442e&quot;,&quot;parentUUID&quot;:&quot;51588366-5861-417b-8fa5-6b1c03c7dce6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow a dollar sign ($) inside \&quot;title\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Input validation validateSearch() should not allow a dollar sign ($) inside \&quot;title\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;search.title = dollarMsg;\nconst { error } = Questionnaire.validateSearch(search);\nexpect(error).to.exist;\nexpect(error).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97738b37-612c-42b2-80d1-9c244b84d56a&quot;,&quot;parentUUID&quot;:&quot;51588366-5861-417b-8fa5-6b1c03c7dce6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c47bca77-a8d0-4279-8080-1fd55f132395&quot;,&quot;eeb115d9-715a-4cb4-b2a9-1f16a70658cf&quot;,&quot;da19b31d-787c-4802-90d9-6b572660f8a9&quot;,&quot;6cde9b3f-cdb9-4e4d-8397-56e5b335779d&quot;,&quot;4bf829fc-4389-4e4a-9778-39b5d15e442e&quot;,&quot;97738b37-612c-42b2-80d1-9c244b84d56a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;ab0d014e-26f6-4215-8118-dc360f7f1e6c&quot;,&quot;title&quot;:&quot;Schema validation&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/questionnaire.test.js&quot;,&quot;file&quot;:&quot;/test/models/questionnaire.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;fac64a28-f1be-4c20-aca7-7f615ca5f3cb&quot;,&quot;title&quot;:&quot;Questionnaire Schema&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/questionnaire.test.js&quot;,&quot;file&quot;:&quot;/test/models/questionnaire.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Questionnaire Schema \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// avoid object references and create copies\nquestions = [...validQuestions];\nquestionnaire = { ...validQuestionnaire };\nquestionnaire.questions = [{ ...validQuestion }];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e32de498-c5be-4692-9377-98b1e4e9392d&quot;,&quot;parentUUID&quot;:&quot;fac64a28-f1be-4c20-aca7-7f615ca5f3cb&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should require \&quot;title\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Questionnaire Schema should require \&quot;title\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete questionnaire.title;\nconst q = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors.title).to.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14f0661e-7d04-4b61-9a30-b392d69a24bd&quot;,&quot;parentUUID&quot;:&quot;fac64a28-f1be-4c20-aca7-7f615ca5f3cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should trim spaces from \&quot;title\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Questionnaire Schema should trim spaces from \&quot;title\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.title = &#x27;  title   &#x27;;\nconst q = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    // expect(error).to.not.exist;\n    expect(q.title).to.equal(&#x27;title&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a65f38b0-0711-4f97-bd20-7ec53458f3e2&quot;,&quot;parentUUID&quot;:&quot;fac64a28-f1be-4c20-aca7-7f615ca5f3cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow \&quot;title\&quot; to have only spaces&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Questionnaire Schema should not allow \&quot;title\&quot; to have only spaces&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.title = &#x27;     &#x27;;\nconst q = new Questionnaire(questionnaire);\n// eslint-disable-next-line sonarjs/no-identical-functions\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors.title).to.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac883b26-f6ad-4206-b24f-a1301fad3d64&quot;,&quot;parentUUID&quot;:&quot;fac64a28-f1be-4c20-aca7-7f615ca5f3cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require \&quot;title\&quot; to be at least one character long&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Questionnaire Schema should require \&quot;title\&quot; to be at least one character long&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.title = &#x27;&#x27;;\nlet q = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors.title).to.exist;\n});\nquestionnaire.title = &#x27;a&#x27;;\nq = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error).to.not.exist;\n    expect(q.title).to.equal(&#x27;a&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42827f5b-eb40-46b4-b6ba-22e0ca049357&quot;,&quot;parentUUID&quot;:&quot;fac64a28-f1be-4c20-aca7-7f615ca5f3cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow \&quot;title\&quot; to be longer than 100 characters&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Questionnaire Schema should not allow \&quot;title\&quot; to be longer than 100 characters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.title = `${&#x27;hello&#x27;.repeat(20)}o`;\nconst q = new Questionnaire(questionnaire);\n// eslint-disable-next-line sonarjs/no-identical-functions\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors.title).to.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28fff54e-5934-4674-9669-8f11d4602dd3&quot;,&quot;parentUUID&quot;:&quot;fac64a28-f1be-4c20-aca7-7f615ca5f3cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require \&quot;submissions\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Questionnaire Schema should require \&quot;submissions\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete questionnaire.submissions;\nconst q = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors.submissions).to.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;55ca734f-dc9e-4306-a392-59a2b0f77b2c&quot;,&quot;parentUUID&quot;:&quot;fac64a28-f1be-4c20-aca7-7f615ca5f3cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow only integers for \&quot;submissions\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Questionnaire Schema should allow only integers for \&quot;submissions\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:40,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;invalidIntegers.forEach((invalidInt) =&gt; {\n    questionnaire.submissions = invalidInt;\n    const q = new Questionnaire(questionnaire);\n    q.validate((error) =&gt; {\n        expect(error.errors).to.exist;\n        expect(error.errors.submissions).to.exist;\n    });\n});\ndone();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ead311e3-f76d-4470-ac52-c45485fc19e8&quot;,&quot;parentUUID&quot;:&quot;fac64a28-f1be-4c20-aca7-7f615ca5f3cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow only positive integers for \&quot;submissions\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Questionnaire Schema should allow only positive integers for \&quot;submissions\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.submissions = -1;\nlet q = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors.submissions).to.exist;\n});\nquestionnaire.submissions = 0;\nq = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors.submissions).to.exist;\n});\nquestionnaire.submissions = 1;\nq = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error).to.not.exist;\n    expect(questionnaire.submissions).to.equal(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42ef8702-80ad-4836-9b13-34571441d5d6&quot;,&quot;parentUUID&quot;:&quot;fac64a28-f1be-4c20-aca7-7f615ca5f3cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require \&quot;questions\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Questionnaire Schema should require \&quot;questions\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete questionnaire.questions;\nconst q = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors.questions).to.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a0cf823-9310-417f-88da-60a4d82f0d14&quot;,&quot;parentUUID&quot;:&quot;fac64a28-f1be-4c20-aca7-7f615ca5f3cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require \&quot;questions\&quot; to not be empty&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Questionnaire Schema should require \&quot;questions\&quot; to not be empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.questions = [];\nconst q = new Questionnaire(questionnaire);\n// eslint-disable-next-line sonarjs/no-identical-functions\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors.questions).to.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5554365b-332c-4dae-aaf3-212af6056a74&quot;,&quot;parentUUID&quot;:&quot;fac64a28-f1be-4c20-aca7-7f615ca5f3cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow multiple \&quot;questions\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Questionnaire Schema should allow multiple \&quot;questions\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.questions = questions;\nconst q = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error).to.not.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;72fdff6f-baa9-4059-aff7-692871a564fd&quot;,&quot;parentUUID&quot;:&quot;fac64a28-f1be-4c20-aca7-7f615ca5f3cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require all \&quot;questions\&quot; have unique question text&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Questionnaire Schema should require all \&quot;questions\&quot; have unique question text&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.questions = [];\nquestions.forEach((qstn) =&gt; {\n    qstn.title = &#x27;question&#x27;;\n    questionnaire.questions.push({...qstn});\n});\nconst q = new Questionnaire(questionnaire);\n// eslint-disable-next-line sonarjs/no-identical-functions\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors.questions).to.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e55cce1-5b96-4cfb-adbf-7911d7da7b99&quot;,&quot;parentUUID&quot;:&quot;fac64a28-f1be-4c20-aca7-7f615ca5f3cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;14f0661e-7d04-4b61-9a30-b392d69a24bd&quot;,&quot;a65f38b0-0711-4f97-bd20-7ec53458f3e2&quot;,&quot;ac883b26-f6ad-4206-b24f-a1301fad3d64&quot;,&quot;42827f5b-eb40-46b4-b6ba-22e0ca049357&quot;,&quot;28fff54e-5934-4674-9669-8f11d4602dd3&quot;,&quot;55ca734f-dc9e-4306-a392-59a2b0f77b2c&quot;,&quot;ead311e3-f76d-4470-ac52-c45485fc19e8&quot;,&quot;42ef8702-80ad-4836-9b13-34571441d5d6&quot;,&quot;2a0cf823-9310-417f-88da-60a4d82f0d14&quot;,&quot;5554365b-332c-4dae-aaf3-212af6056a74&quot;,&quot;72fdff6f-baa9-4059-aff7-692871a564fd&quot;,&quot;1e55cce1-5b96-4cfb-adbf-7911d7da7b99&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:92,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;c1b37eed-92f0-4ec7-a275-49e881c193cc&quot;,&quot;title&quot;:&quot;Question Schema&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/questionnaire.test.js&quot;,&quot;file&quot;:&quot;/test/models/questionnaire.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Question Schema \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// avoid object references and create copies\noptions = validOptions.map((opt) =&gt; {\n    return { ...opt };\n});\nquestionnaire = { ...validQuestionnaire };\nquestionnaire.questions = [{ ...validQuestion }];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f8aa111-1bd2-437c-8240-9ac79226dcc2&quot;,&quot;parentUUID&quot;:&quot;c1b37eed-92f0-4ec7-a275-49e881c193cc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should require \&quot;title\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Question Schema should require \&quot;title\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete questionnaire.questions[0].title;\nconst q = new Questionnaire(questionnaire);\n// eslint-disable-next-line sonarjs/no-identical-functions\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors.questions).to.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c25513f-ac1b-4577-9070-e33a0a694872&quot;,&quot;parentUUID&quot;:&quot;c1b37eed-92f0-4ec7-a275-49e881c193cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should trim spaces from \&quot;title\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Question Schema should trim spaces from \&quot;title\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.questions[0].title = &#x27;  question   &#x27;;\nconst q = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error).to.not.exist;\n    expect(q.questions[0].title).to.equal(&#x27;question&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e392cffe-751f-47fa-896f-677c2e128c7b&quot;,&quot;parentUUID&quot;:&quot;c1b37eed-92f0-4ec7-a275-49e881c193cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow \&quot;title\&quot; to have only spaces&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Question Schema should not allow \&quot;title\&quot; to have only spaces&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.questions[0].title = &#x27;     &#x27;;\nconst q = new Questionnaire(questionnaire);\n// eslint-disable-next-line sonarjs/no-identical-functions\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors.questions).to.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19c17bea-c9d9-4c41-9b1d-3ebaf3082fca&quot;,&quot;parentUUID&quot;:&quot;c1b37eed-92f0-4ec7-a275-49e881c193cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require \&quot;title\&quot; to be at least one character long&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Question Schema should require \&quot;title\&quot; to be at least one character long&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.questions[0].title = &#x27;&#x27;;\nlet q = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors.questions).to.exist;\n});\nquestionnaire.questions[0].title = &#x27;a&#x27;;\nq = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error).to.not.exist;\n    expect(q.questions[0].title).to.equal(&#x27;a&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fdb2e305-3129-4702-aceb-f7f838afa779&quot;,&quot;parentUUID&quot;:&quot;c1b37eed-92f0-4ec7-a275-49e881c193cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow \&quot;title\&quot; to be longer than 100 characters&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Question Schema should not allow \&quot;title\&quot; to be longer than 100 characters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.questions[0].title =\n    &#x27;This very, very, very, very, very, very long text value is exactly one hundred an one characters long&#x27;;\nconst q = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors[&#x27;questions.0.title&#x27;]).to.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b6c0c788-941b-448b-ace1-8081871418b5&quot;,&quot;parentUUID&quot;:&quot;c1b37eed-92f0-4ec7-a275-49e881c193cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require \&quot;maxPoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Question Schema should require \&quot;maxPoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete questionnaire.questions[0].maxPoints;\nconst q = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors[maxP]).to.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2fafb180-3a29-4711-b2b7-2069672e5104&quot;,&quot;parentUUID&quot;:&quot;c1b37eed-92f0-4ec7-a275-49e881c193cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow only integers for \&quot;maxPoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Question Schema should allow only integers for \&quot;maxPoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;invalidIntegers.forEach((invalidInt) =&gt; {\n    questionnaire.questions[0].maxPoints = invalidInt;\n    const q = new Questionnaire(questionnaire);\n    q.validate((error) =&gt; {\n        expect(error.errors).to.exist;\n        expect(error.errors[maxP]).to.exist;\n    });\n});\ndone();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2ef1dc1-9420-427e-b869-b593eb6e94c9&quot;,&quot;parentUUID&quot;:&quot;c1b37eed-92f0-4ec7-a275-49e881c193cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow only positive integers for \&quot;maxPoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Question Schema should allow only positive integers for \&quot;maxPoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.questions[0].maxPoints = -1;\nlet q = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors[maxP]).to.exist;\n});\nquestionnaire.questions[0].maxPoints = 0;\nq = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors[maxP]).to.exist;\n});\nquestionnaire.questions[0].maxPoints = 1;\nq = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error).to.not.exist;\n    expect(questionnaire.questions[0].maxPoints).to.equal(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae4825c7-2216-490d-ac9b-6f93f2eedcb6&quot;,&quot;parentUUID&quot;:&quot;c1b37eed-92f0-4ec7-a275-49e881c193cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require \&quot;options\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Question Schema should require \&quot;options\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete questionnaire.questions[0].options;\nconst q = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors[opt0]).to.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;50f008a2-888f-4edf-a829-0450dc1194c7&quot;,&quot;parentUUID&quot;:&quot;c1b37eed-92f0-4ec7-a275-49e881c193cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require at least two \&quot;options\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Question Schema should require at least two \&quot;options\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.questions[0].options.pop();\nconst q = new Questionnaire(questionnaire);\n// eslint-disable-next-line sonarjs/no-identical-functions\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors[opt0]).to.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b55d9d1-99c5-4c65-a557-3859ea7d7208&quot;,&quot;parentUUID&quot;:&quot;c1b37eed-92f0-4ec7-a275-49e881c193cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require all \&quot;options\&quot; to have unique option text&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Question Schema should require all \&quot;options\&quot; to have unique option text&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.questions[0].options = options.map((option) =&gt; {\n    option.option = &#x27;option&#x27;;\n    return option;\n});\nconst q = new Questionnaire(questionnaire);\n// eslint-disable-next-line sonarjs/no-identical-functions\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors[opt0]).to.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b62292f3-409b-4375-b7e4-ae0bbb9999d2&quot;,&quot;parentUUID&quot;:&quot;c1b37eed-92f0-4ec7-a275-49e881c193cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require at least one correct answer in \&quot;options\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Question Schema should require at least one correct answer in \&quot;options\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.questions[0].options = options.map((option) =&gt; {\n    option.correctness = false;\n    return option;\n});\nconst q = new Questionnaire(questionnaire);\n// eslint-disable-next-line sonarjs/no-identical-functions\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors[opt0]).to.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;55fc177c-fd0f-4326-92d8-37d3e80eb328&quot;,&quot;parentUUID&quot;:&quot;c1b37eed-92f0-4ec7-a275-49e881c193cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0c25513f-ac1b-4577-9070-e33a0a694872&quot;,&quot;e392cffe-751f-47fa-896f-677c2e128c7b&quot;,&quot;19c17bea-c9d9-4c41-9b1d-3ebaf3082fca&quot;,&quot;fdb2e305-3129-4702-aceb-f7f838afa779&quot;,&quot;b6c0c788-941b-448b-ace1-8081871418b5&quot;,&quot;2fafb180-3a29-4711-b2b7-2069672e5104&quot;,&quot;a2ef1dc1-9420-427e-b869-b593eb6e94c9&quot;,&quot;ae4825c7-2216-490d-ac9b-6f93f2eedcb6&quot;,&quot;50f008a2-888f-4edf-a829-0450dc1194c7&quot;,&quot;1b55d9d1-99c5-4c65-a557-3859ea7d7208&quot;,&quot;b62292f3-409b-4375-b7e4-ae0bbb9999d2&quot;,&quot;55fc177c-fd0f-4326-92d8-37d3e80eb328&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:56,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;b123a7fc-5ac7-4363-aef0-330bf437825f&quot;,&quot;title&quot;:&quot;Option Schema&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/questionnaire.test.js&quot;,&quot;file&quot;:&quot;/test/models/questionnaire.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Option Schema \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// avoid object references and create copies\nconst options = validOptions.map((opt) =&gt; {\n    return { ...opt };\n});\nconst question = { ...validQuestion };\nquestion.options = options.map((opt) =&gt; {\n    return { ...opt };\n});\nquestionnaire = { ...validQuestionnaire };\nquestionnaire.questions = [{ ...question }];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;50cf5c9d-05a5-4113-90f4-eb583db7b1e1&quot;,&quot;parentUUID&quot;:&quot;b123a7fc-5ac7-4363-aef0-330bf437825f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should require \&quot;option\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Option Schema should require \&quot;option\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete questionnaire.questions[0].options[0].option;\nconst q = new Questionnaire(questionnaire);\n// eslint-disable-next-line sonarjs/no-identical-functions\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors[opt0]).to.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09bdc0dd-88d7-42c5-ada2-3b8b7e0b8738&quot;,&quot;parentUUID&quot;:&quot;b123a7fc-5ac7-4363-aef0-330bf437825f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should trim spaces from \&quot;option\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Option Schema should trim spaces from \&quot;option\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.questions[0].options[0].option = &#x27;  option 1  &#x27;;\nconst q = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error).to.not.exist;\n    expect(q.questions[0].options[0].option).to.equal(&#x27;option 1&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8fd61ce-1a67-47a7-89ea-d1633e9f5cb1&quot;,&quot;parentUUID&quot;:&quot;b123a7fc-5ac7-4363-aef0-330bf437825f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow \&quot;option\&quot; to have only spaces&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Option Schema should not allow \&quot;option\&quot; to have only spaces&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.questions[0].options[0].option = &#x27;    &#x27;;\nconst q = new Questionnaire(questionnaire);\n// eslint-disable-next-line sonarjs/no-identical-functions\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors[opt0]).to.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a551e06b-7348-44c7-993a-3c4544b11c55&quot;,&quot;parentUUID&quot;:&quot;b123a7fc-5ac7-4363-aef0-330bf437825f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require \&quot;option\&quot; to be at least one character long&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Option Schema should require \&quot;option\&quot; to be at least one character long&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.questions[0].options[0].option = &#x27;&#x27;;\nlet q = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors[opt0]).to.exist;\n});\nquestionnaire.questions[0].options[0].option = &#x27;a&#x27;;\nq = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error).to.not.exist;\n    expect(q.questions[0].options[0].option).to.equal(&#x27;a&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29c5f128-9f63-4334-869f-8686b2f5b3be&quot;,&quot;parentUUID&quot;:&quot;b123a7fc-5ac7-4363-aef0-330bf437825f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow \&quot;option\&quot; to be longer than 50 characters&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Option Schema should not allow \&quot;option\&quot; to be longer than 50 characters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.questions[0].options[0].option =\n    &#x27;Very long text value that is over fifty characters long!&#x27;;\nconst q = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors[&#x27;questions.0.options.0.option&#x27;]).to.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;141bce73-9bbd-463e-9f6b-c54d473fbf8a&quot;,&quot;parentUUID&quot;:&quot;b123a7fc-5ac7-4363-aef0-330bf437825f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow missing \&quot;hint\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Option Schema should allow missing \&quot;hint\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete questionnaire.questions[0].options[0].hint;\nconst q = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error).to.not.exist;\n    expect(q.questions[0].options[0].hint).to.not.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;693f24c8-313e-4632-84c5-e8c69a3345b1&quot;,&quot;parentUUID&quot;:&quot;b123a7fc-5ac7-4363-aef0-330bf437825f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow empty \&quot;hint\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Option Schema should allow empty \&quot;hint\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.questions[0].options[0].hint = &#x27;&#x27;;\nconst q = new Questionnaire(questionnaire);\n// eslint-disable-next-line sonarjs/no-identical-functions\nq.validate((error) =&gt; {\n    expect(error).to.not.exist;\n    expect(q.questions[0].options[0].hint).to.not.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ea004ca-e92b-411a-84cf-04051c3c86d4&quot;,&quot;parentUUID&quot;:&quot;b123a7fc-5ac7-4363-aef0-330bf437825f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore \&quot;hint\&quot; that is set to undefined&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Option Schema should ignore \&quot;hint\&quot; that is set to undefined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.questions[0].options[0].hint = undefined;\nconst q = new Questionnaire(questionnaire);\n// eslint-disable-next-line sonarjs/no-identical-functions\nq.validate((error) =&gt; {\n    expect(error).to.not.exist;\n    expect(q.questions[0].options[0].hint).to.not.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16fd4c7e-5428-48e4-94db-a1e43f0f0f74&quot;,&quot;parentUUID&quot;:&quot;b123a7fc-5ac7-4363-aef0-330bf437825f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should trim spaces from \&quot;hint\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Option Schema should trim spaces from \&quot;hint\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.questions[0].options[0].hint = &#x27;  hint   &#x27;;\nconst q = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error).to.not.exist;\n    expect(q.questions[0].options[0].hint).to.equal(&#x27;hint&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1180edc-5f6a-4a9b-8b2c-655ffdc3e9a8&quot;,&quot;parentUUID&quot;:&quot;b123a7fc-5ac7-4363-aef0-330bf437825f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow \&quot;hint\&quot; to be longer than 100 characters&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Option Schema should not allow \&quot;hint\&quot; to be longer than 100 characters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;questionnaire.questions[0].options[0].hint =\n    &#x27;This very, very, very, very, very, very long text value is exactly one hundred an one characters long&#x27;;\nconst q = new Questionnaire(questionnaire);\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors[&#x27;questions.0.options.0.hint&#x27;]).to.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;596fdbf6-d47b-4921-941c-13d51632df63&quot;,&quot;parentUUID&quot;:&quot;b123a7fc-5ac7-4363-aef0-330bf437825f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require \&quot;correctness\&quot;&quot;,&quot;fullTitle&quot;:&quot;Questionnaire Schema validation Option Schema should require \&quot;correctness\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;delete questionnaire.questions[0].options[0].correctness;\nconst q = new Questionnaire(questionnaire);\n// eslint-disable-next-line sonarjs/no-identical-functions\nq.validate((error) =&gt; {\n    expect(error.errors).to.exist;\n    expect(error.errors[opt0]).to.exist;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b57f167c-4208-4dcd-9eb0-1f63bcd17b1a&quot;,&quot;parentUUID&quot;:&quot;b123a7fc-5ac7-4363-aef0-330bf437825f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;09bdc0dd-88d7-42c5-ada2-3b8b7e0b8738&quot;,&quot;c8fd61ce-1a67-47a7-89ea-d1633e9f5cb1&quot;,&quot;a551e06b-7348-44c7-993a-3c4544b11c55&quot;,&quot;29c5f128-9f63-4334-869f-8686b2f5b3be&quot;,&quot;141bce73-9bbd-463e-9f6b-c54d473fbf8a&quot;,&quot;693f24c8-313e-4632-84c5-e8c69a3345b1&quot;,&quot;1ea004ca-e92b-411a-84cf-04051c3c86d4&quot;,&quot;16fd4c7e-5428-48e4-94db-a1e43f0f0f74&quot;,&quot;a1180edc-5f6a-4a9b-8b2c-655ffdc3e9a8&quot;,&quot;596fdbf6-d47b-4921-941c-13d51632df63&quot;,&quot;b57f167c-4208-4dcd-9eb0-1f63bcd17b1a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:39,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;3f23faf7-d464-4812-a43a-71369fcdfd3e&quot;,&quot;title&quot;:&quot;User&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/user.test.js&quot;,&quot;file&quot;:&quot;/test/models/user.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7ee79b93-eb18-4c94-ab73-028b386c3881&quot;,&quot;title&quot;:&quot;Input validation&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/user.test.js&quot;,&quot;file&quot;:&quot;/test/models/user.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ce74b428-fe13-46f5-af61-a8ee39f49653&quot;,&quot;title&quot;:&quot;validateLogin()&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/user.test.js&quot;,&quot;file&quot;:&quot;/test/models/user.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;must define email&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateLogin() must define email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = {\n    password: &#x27;testi12345&#x27;\n};\nconst err = User.validateLogin(testUser).error;\nassert(err &amp;&amp; err.email, &#x27;testUser does not define an email, however, no error was received&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b97351e-0aa1-427a-a355-b4ff4792a4c6&quot;,&quot;parentUUID&quot;:&quot;ce74b428-fe13-46f5-af61-a8ee39f49653&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must define a valid email&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateLogin() must define a valid email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = {\n    email: &#x27;testcasetuni.fi&#x27;,\n    password: &#x27;testi12345&#x27;\n};\nconst err = User.validateLogin(testUser).error;\nassert(err &amp;&amp; err.email, &#x27;email of testUser is not valid - there must be an error&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef2b1a47-c4d3-4dd4-909c-7c13a837f0c1&quot;,&quot;parentUUID&quot;:&quot;ce74b428-fe13-46f5-af61-a8ee39f49653&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must define password&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateLogin() must define password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = {\n    email: testEmail\n};\nconst err = User.validateLogin(testUser).error;\nassert(err &amp;&amp; err.password, &#x27;testUser does not define a password, however, no error was received&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b960f03-4355-4fe8-be0f-fe637c596ea9&quot;,&quot;parentUUID&quot;:&quot;ce74b428-fe13-46f5-af61-a8ee39f49653&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must not allow an empty password&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateLogin() must not allow an empty password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = {\n    email: testEmail,\n    password: &#x27;&#x27;\n};\nconst err = User.validateLogin(testUser).error;\nassert(err &amp;&amp; err.password, &#x27;password cannot be empty - an error must be received&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b1a96fb-c83d-425d-b2d0-9b277d22a446&quot;,&quot;parentUUID&quot;:&quot;ce74b428-fe13-46f5-af61-a8ee39f49653&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must have a password of length 1-100&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateLogin() must have a password of length 1-100&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = {\n    email: &#x27;testcase@tuni.fi&#x27;,\n    password: &#x27;&#x27;\n};\nlet err = User.validateLogin(testUser).error;\nassert(err &amp;&amp; err.password, &#x27;password must not be empty - an error must be received&#x27;);\ntestUser.password = createTestString(1);\nerr = User.validateLogin(testUser).error;\nassert(!err, &#x27;one character password is accepted&#x27;);\ntestUser.password = createTestString(100);\nerr = User.validateLogin(testUser).error;\nassert(!err, &#x27;100 character password is accepted&#x27;);\ntestUser.password = createTestString(101);\nerr = User.validateLogin(testUser).error;\nassert(err &amp;&amp; err.password, &#x27;password must not be over 100 characters - there must be error&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b870532-5369-4053-9d03-12716fb366c0&quot;,&quot;parentUUID&quot;:&quot;ce74b428-fe13-46f5-af61-a8ee39f49653&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6b97351e-0aa1-427a-a355-b4ff4792a4c6&quot;,&quot;ef2b1a47-c4d3-4dd4-909c-7c13a837f0c1&quot;,&quot;4b960f03-4355-4fe8-be0f-fe637c596ea9&quot;,&quot;7b1a96fb-c83d-425d-b2d0-9b277d22a446&quot;,&quot;9b870532-5369-4053-9d03-12716fb366c0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;0e3190e1-5424-4288-8726-757886dc1d28&quot;,&quot;title&quot;:&quot;validateRegistration()&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/user.test.js&quot;,&quot;file&quot;:&quot;/test/models/user.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;must define \&quot;name\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateRegistration() must define \&quot;name\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testRegistration = {\n    email: testEmail2,\n    password: &#x27;ohhoh12345&#x27;,\n    passwordConfirmation: &#x27;ohhoh12345&#x27;\n};\nconst err = User.validateRegistration(testRegistration).error;\nassert(err &amp;&amp; err.name, &#x27;must require name&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;501ef61e-871c-4619-bbe9-25c62b58981e&quot;,&quot;parentUUID&quot;:&quot;0e3190e1-5424-4288-8726-757886dc1d28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;trims spaces from \&quot;name\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateRegistration() trims spaces from \&quot;name\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// eslint-disable-next-line no-shadow\nconst name = &#x27; Oskari Olematon &#x27;;\nconst testRegistration = {\n    name: name,\n    email: testEmail2,\n    password: &#x27;ohhoh12345&#x27;,\n    passwordConfirmation: &#x27;ohhoh12345&#x27;\n};\nconst { error, value } = User.validateRegistration(testRegistration);\nassert(!error, &#x27;must trim trailing spaces&#x27;);\nassert.strictEqual(name.trim(), value.name, &#x27;must trim trailing spaces&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b0203eb-096b-4968-a4c0-83ed80829320&quot;,&quot;parentUUID&quot;:&quot;0e3190e1-5424-4288-8726-757886dc1d28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must not allow \&quot;name\&quot; with spaces only&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateRegistration() must not allow \&quot;name\&quot; with spaces only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testRegistration = {\n    name: &#x27;      &#x27;,\n    email: testEmail2,\n    password: &#x27;ohhoh12345&#x27;,\n    passwordConfirmation: &#x27;ohhoh12345&#x27;\n};\nconst err = User.validateRegistration(testRegistration).error;\nassert(err &amp;&amp; err.name, &#x27;name must not comprise only spaces - there must be an error&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;82518eeb-abd9-43b0-95c1-ed46207825e8&quot;,&quot;parentUUID&quot;:&quot;0e3190e1-5424-4288-8726-757886dc1d28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must require \&quot;name\&quot; to be at least one char long&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateRegistration() must require \&quot;name\&quot; to be at least one char long&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testRegistration = {\n    name: &#x27;&#x27;,\n    email: testEmail2,\n    password: &#x27;ohhoh12345&#x27;,\n    passwordConfirmation: &#x27;ohhoh12345&#x27;\n};\nlet err = User.validateRegistration(testRegistration).error;\nassert(err &amp;&amp; err.name, &#x27;name must be at least one character long&#x27;);\nconst testRegistration2 = {\n    name: &#x27;a&#x27;,\n    email: testEmail2,\n    password: &#x27;ohhoh12345&#x27;,\n    passwordConfirmation: &#x27;ohhoh12345&#x27;\n};\nerr = User.validateRegistration(testRegistration2).error;\nassert(!err, &#x27;name is allowed to be one character long&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ea349e3-ef4b-4ee5-aa31-763efb1d4b59&quot;,&quot;parentUUID&quot;:&quot;0e3190e1-5424-4288-8726-757886dc1d28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must not allow \&quot;name\&quot; &gt; 50 characters&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateRegistration() must not allow \&quot;name\&quot; &gt; 50 characters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testRegistration = {\n    name: createTestString(51),\n    email: testEmail2,\n    password: &#x27;ohhoh12345&#x27;,\n    passwordConfirmation: &#x27;ohhoh12345&#x27;\n};\nconst err = User.validateRegistration(testRegistration).error;\nassert(err &amp;&amp; err.name, &#x27;name must be at most 50 characters long&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2be2265d-96dc-4e52-92b4-ef55ad610538&quot;,&quot;parentUUID&quot;:&quot;0e3190e1-5424-4288-8726-757886dc1d28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must not allow a dollar sign ($) inside \&quot;name\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateRegistration() must not allow a dollar sign ($) inside \&quot;name\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testRegistration = {\n    name: &#x27;sadfj$$HK&#x27;,\n    email: testEmail2,\n    password: &#x27;ohhoh12345&#x27;,\n    passwordConfirmation: &#x27;ohhoh12345&#x27;\n};\nconst err = User.validateRegistration(testRegistration).error;\nassert(err &amp;&amp; err.name, &#x27;name must not contain $ char&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd1540da-9a9f-447e-967b-95a2b90f7725&quot;,&quot;parentUUID&quot;:&quot;0e3190e1-5424-4288-8726-757886dc1d28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must require an \&quot;email\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateRegistration() must require an \&quot;email\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testRegistration = {\n    name: testName,\n    password: &#x27;ohhoh12345&#x27;,\n    passwordConfirmation: &#x27;ohhoh12345&#x27;\n};\nconst err = User.validateRegistration(testRegistration).error;\nassert(err &amp;&amp; err.email, &#x27;email must be included in the registration&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8e7aedf-8b30-42f7-9c1e-ee9ab2103fc3&quot;,&quot;parentUUID&quot;:&quot;0e3190e1-5424-4288-8726-757886dc1d28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must require \&quot;email\&quot; to be valid email address&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateRegistration() must require \&quot;email\&quot; to be valid email address&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testRegistration = {\n    name: testName,\n    email: &#x27;o.ooolioo.com&#x27;,\n    password: &#x27;ohhoh12345&#x27;,\n    passwordConfirmation: &#x27;ohhoh12345&#x27;\n};\nconst err = User.validateRegistration(testRegistration).error;\nassert(err &amp;&amp; err.email, &#x27;must require a valid email&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6fc85652-b8e3-4e8d-8aeb-c7a0ba342312&quot;,&quot;parentUUID&quot;:&quot;0e3190e1-5424-4288-8726-757886dc1d28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must require \&quot;password\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateRegistration() must require \&quot;password\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testRegistration = {\n    name: testName,\n    email: testEmail2,\n    passwordConfirmation: &#x27;ohhoh&#x27;\n};\nconst err = User.validateRegistration(testRegistration).error;\nassert(err &amp;&amp; err.password, &#x27;password must be included&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b43f0c4b-f5dd-409d-a508-fe44c7af1971&quot;,&quot;parentUUID&quot;:&quot;0e3190e1-5424-4288-8726-757886dc1d28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must not allow empty \&quot;password\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateRegistration() must not allow empty \&quot;password\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testRegistration = {\n    name: testName,\n    email: testEmail2,\n    password: &#x27;&#x27;,\n    passwordConfirmation: &#x27;&#x27;\n};\nconst err = User.validateRegistration(testRegistration).error;\nassert(err &amp;&amp; err.password, &#x27;must not allow an empty password&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cdd40f58-d9a6-49be-b4bd-1aef93c9dab2&quot;,&quot;parentUUID&quot;:&quot;0e3190e1-5424-4288-8726-757886dc1d28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must require minimum \&quot;password\&quot; length of 10 characters&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateRegistration() must require minimum \&quot;password\&quot; length of 10 characters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testRegistration = {\n    name: testName,\n    email: testEmail2,\n    password: &#x27;ohhoh&#x27;,\n    passwordConfirmation: &#x27;ohhoh&#x27;\n};\nconst err = User.validateRegistration(testRegistration).error;\nassert(err &amp;&amp; err.password, &#x27;must require at least 10 chars in password&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eee5af58-2597-47cb-b341-b99f4a18477a&quot;,&quot;parentUUID&quot;:&quot;0e3190e1-5424-4288-8726-757886dc1d28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must require \&quot;passwordConfirmation\&quot; to match \&quot;password\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateRegistration() must require \&quot;passwordConfirmation\&quot; to match \&quot;password\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testRegistration = {\n    name: testName,\n    email: testEmail2,\n    password: &#x27;oho1234567&#x27;,\n    passwordConfirmation: &#x27;oho12345678&#x27;\n};\nconst err = User.validateRegistration(testRegistration).error;\nassert(err &amp;&amp; err.passwordConfirmation, &#x27;password and confirmation do not match&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88316848-5b8a-49e6-b36b-6a1e45b954d2&quot;,&quot;parentUUID&quot;:&quot;0e3190e1-5424-4288-8726-757886dc1d28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;501ef61e-871c-4619-bbe9-25c62b58981e&quot;,&quot;7b0203eb-096b-4968-a4c0-83ed80829320&quot;,&quot;82518eeb-abd9-43b0-95c1-ed46207825e8&quot;,&quot;2ea349e3-ef4b-4ee5-aa31-763efb1d4b59&quot;,&quot;2be2265d-96dc-4e52-92b4-ef55ad610538&quot;,&quot;cd1540da-9a9f-447e-967b-95a2b90f7725&quot;,&quot;c8e7aedf-8b30-42f7-9c1e-ee9ab2103fc3&quot;,&quot;6fc85652-b8e3-4e8d-8aeb-c7a0ba342312&quot;,&quot;b43f0c4b-f5dd-409d-a508-fe44c7af1971&quot;,&quot;cdd40f58-d9a6-49be-b4bd-1aef93c9dab2&quot;,&quot;eee5af58-2597-47cb-b341-b99f4a18477a&quot;,&quot;88316848-5b8a-49e6-b36b-6a1e45b954d2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;8301c435-0fa6-4f18-8883-8e161eec85bf&quot;,&quot;title&quot;:&quot;validateRole()&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/user.test.js&quot;,&quot;file&quot;:&quot;/test/models/user.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;must require \&quot;role\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateRole() must require \&quot;role\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testRole = {};\nconst err = User.validateRole(testRole).error;\nassert(err &amp;&amp; err.role, &#x27;must require role&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76527345-08a2-43c0-b3fd-0989fbf78794&quot;,&quot;parentUUID&quot;:&quot;8301c435-0fa6-4f18-8883-8e161eec85bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must not allow empty \&quot;role\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateRole() must not allow empty \&quot;role\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testRole = {\n    role: &#x27;&#x27;\n};\nconst err = User.validateRole(testRole).error;\nassert(err &amp;&amp; err.role, &#x27;must not allow empty role&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d0180da-2f4b-418e-9c35-0543a08b57a8&quot;,&quot;parentUUID&quot;:&quot;8301c435-0fa6-4f18-8883-8e161eec85bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must allow any known \&quot;role\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateRole() must allow any known \&quot;role\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testRoles = [&#x27;student&#x27;, &#x27;teacher&#x27;, &#x27;admin&#x27;];\ntestRoles.forEach(function(role) {\n    const testRole = {\n        role: role\n    };\n    const err = User.validateRole(testRole).error;\n    assert(!err, `known role ${role} must be accepted`);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e969d0d-5808-45eb-bb4c-04034997eacd&quot;,&quot;parentUUID&quot;:&quot;8301c435-0fa6-4f18-8883-8e161eec85bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must trim \&quot;role\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateRole() must trim \&quot;role\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testRoles = [&#x27;   student&#x27;, &#x27;teacher  &#x27;, &#x27; admin &#x27;];\ntestRoles.forEach(function(role) {\n    const testRole = {\n        role: role\n    };\n    const err = User.validateRole(testRole).error;\n    assert(!err, `must trim \&quot;${role}\&quot;`);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;217be84d-c682-4193-8bbc-abb12ef0d45f&quot;,&quot;parentUUID&quot;:&quot;8301c435-0fa6-4f18-8883-8e161eec85bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must handle \&quot;role\&quot; case-insensitively&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateRole() must handle \&quot;role\&quot; case-insensitively&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testRoles = [&#x27;Student&#x27;, &#x27;teacHER&#x27;, &#x27;ADMIN&#x27;];\ntestRoles.forEach(function(role) {\n    const testRole = {\n        role: role\n    };\n    const err = User.validateRole(testRole).error;\n    assert(!err, `\&quot;role\&quot; ${role} was not handled case-insensitively`);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38e14940-8d11-4cc2-b2f6-690fb0653108&quot;,&quot;parentUUID&quot;:&quot;8301c435-0fa6-4f18-8883-8e161eec85bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must not allow unknown \&quot;role\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateRole() must not allow unknown \&quot;role\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testRoles = [&#x27;elephant&#x27;, &#x27;lion&#x27;, &#x27;horse&#x27;];\ntestRoles.forEach(function(role) {\n    const testRole = {\n        role: role\n    };\n    const err = User.validateRole(testRole).error;\n    assert(err &amp;&amp; err.role, `must not allow unknown \&quot;role\&quot; such as ${role}`);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38363b53-ab32-46cc-9652-0e3ea0093288&quot;,&quot;parentUUID&quot;:&quot;8301c435-0fa6-4f18-8883-8e161eec85bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;76527345-08a2-43c0-b3fd-0989fbf78794&quot;,&quot;3d0180da-2f4b-418e-9c35-0543a08b57a8&quot;,&quot;0e969d0d-5808-45eb-bb4c-04034997eacd&quot;,&quot;217be84d-c682-4193-8bbc-abb12ef0d45f&quot;,&quot;38e14940-8d11-4cc2-b2f6-690fb0653108&quot;,&quot;38363b53-ab32-46cc-9652-0e3ea0093288&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;8f6d1137-dd6e-4eea-9fd5-0762c0080338&quot;,&quot;title&quot;:&quot;validateUpdate()&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/user.test.js&quot;,&quot;file&quot;:&quot;/test/models/user.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;must require \&quot;name\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateUpdate() must require \&quot;name\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUpdate = {\n    email: testEmail2,\n    password: &#x27;oho1234567&#x27;\n};\nconst err = User.validateUpdate(testUpdate).error;\nassert(err &amp;&amp; err.name, &#x27;must require name&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;916ec068-8578-41a1-98d2-ba7d8dacf59a&quot;,&quot;parentUUID&quot;:&quot;8f6d1137-dd6e-4eea-9fd5-0762c0080338&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must trim spaces from \&quot;name\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateUpdate() must trim spaces from \&quot;name\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUpdate = {\n    name: &#x27;  testName  &#x27;,\n    email: testEmail2,\n    password: &#x27;oho1234567&#x27;\n};\nconst { error, value } = User.validateUpdate(testUpdate);\nassert(!error, &#x27;must accept name with spaces around it&#x27;);\nassert.strictEqual(value.name, &#x27;testName&#x27;, &#x27;must trim spaces from name&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c945aea-22c7-4989-9f6a-78746b913fb3&quot;,&quot;parentUUID&quot;:&quot;8f6d1137-dd6e-4eea-9fd5-0762c0080338&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must not allow \&quot;name\&quot; to have only spaces&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateUpdate() must not allow \&quot;name\&quot; to have only spaces&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUpdate = {\n    name: &#x27;   &#x27;,\n    email: testEmail2,\n    password: &#x27;oho1234567&#x27;\n};\nconst err = User.validateUpdate(testUpdate).error;\nassert(err &amp;&amp; err.name, &#x27;must not allow name to have only spaces&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bdbfe25f-bf63-4171-8a71-c929d6b65c06&quot;,&quot;parentUUID&quot;:&quot;8f6d1137-dd6e-4eea-9fd5-0762c0080338&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must require \&quot;name\&quot; to be at least one character long&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateUpdate() must require \&quot;name\&quot; to be at least one character long&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUpdate = {\n    name: &#x27;&#x27;,\n    email: testEmail2,\n    password: &#x27;oho1234567&#x27;\n};\nconst err = User.validateUpdate(testUpdate).error;\nassert(err &amp;&amp; err.name, &#x27;must  require name to be at least one charcter long&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8757bd67-873f-491f-9c5f-3d54c66217b8&quot;,&quot;parentUUID&quot;:&quot;8f6d1137-dd6e-4eea-9fd5-0762c0080338&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must not allow \&quot;name\&quot; to be longer than 50 characters&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateUpdate() must not allow \&quot;name\&quot; to be longer than 50 characters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testNameCreate = createTestString(51);\nconst testUpdate = {\n    name: testNameCreate,\n    email: testEmail2,\n    password: &#x27;oho1234567&#x27;\n};\nconst err = User.validateUpdate(testUpdate).error;\nassert(err &amp;&amp; err.name, &#x27;must not allow name.lenght &gt; 50&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96fab341-3063-437b-9114-80422855e821&quot;,&quot;parentUUID&quot;:&quot;8f6d1137-dd6e-4eea-9fd5-0762c0080338&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must not allow a dollar sign ($) inside \&quot;name\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateUpdate() must not allow a dollar sign ($) inside \&quot;name\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUpdate = {\n    name: &#x27;Vilma$$Vlkky&#x27;,\n    email: testEmail2,\n    password: &#x27;oho1234567&#x27;\n};\nconst err = User.validateUpdate(testUpdate).error;\nassert(err &amp;&amp; err.name, &#x27;must not allow a dollar sign inside name&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f11b379-276d-471e-bad8-db2518cddf6a&quot;,&quot;parentUUID&quot;:&quot;8f6d1137-dd6e-4eea-9fd5-0762c0080338&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must require \&quot;email\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateUpdate() must require \&quot;email\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUpdate = {\n    name: testName,\n    password: &#x27;oho1234567&#x27;\n};\nconst err = User.validateUpdate(testUpdate).error;\nassert(err &amp;&amp; err.email, &#x27;must require email&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2703e386-01d1-4f4f-845e-601fa4697f1c&quot;,&quot;parentUUID&quot;:&quot;8f6d1137-dd6e-4eea-9fd5-0762c0080338&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must require \&quot;email\&quot; to be a valid email address&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateUpdate() must require \&quot;email\&quot; to be a valid email address&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUpdate = {\n    name: testName,\n    email: &#x27;o.ooolioo.com&#x27;,\n    password: &#x27;oho1234567&#x27;\n};\nconst err = User.validateUpdate(testUpdate).error;\nassert(err &amp;&amp; err.email, &#x27;must require email to be a valid email address&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7b2d751-7ff7-4686-9a22-a268b5e2f2aa&quot;,&quot;parentUUID&quot;:&quot;8f6d1137-dd6e-4eea-9fd5-0762c0080338&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must require a password&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateUpdate() must require a password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUpdate = {\n    name: testName,\n    email: testEmail2\n};\nconst err = User.validateUpdate(testUpdate).error;\nassert(err &amp;&amp; err.password, &#x27;must require a password&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;415bdaa6-d5f6-4870-a4d5-b4e861024e03&quot;,&quot;parentUUID&quot;:&quot;8f6d1137-dd6e-4eea-9fd5-0762c0080338&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must not allow empty password&quot;,&quot;fullTitle&quot;:&quot;User Input validation validateUpdate() must not allow empty password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUpdate = {\n    name: testName,\n    email: testEmail2,\n    password: &#x27;&#x27;\n};\nconst err = User.validateUpdate(testUpdate).error;\nassert(err &amp;&amp; err.password, &#x27;must not allow empty password&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c714e32-ae5d-4859-ae8a-8718f30a7247&quot;,&quot;parentUUID&quot;:&quot;8f6d1137-dd6e-4eea-9fd5-0762c0080338&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;916ec068-8578-41a1-98d2-ba7d8dacf59a&quot;,&quot;4c945aea-22c7-4989-9f6a-78746b913fb3&quot;,&quot;bdbfe25f-bf63-4171-8a71-c929d6b65c06&quot;,&quot;8757bd67-873f-491f-9c5f-3d54c66217b8&quot;,&quot;96fab341-3063-437b-9114-80422855e821&quot;,&quot;1f11b379-276d-471e-bad8-db2518cddf6a&quot;,&quot;2703e386-01d1-4f4f-845e-601fa4697f1c&quot;,&quot;f7b2d751-7ff7-4686-9a22-a268b5e2f2aa&quot;,&quot;415bdaa6-d5f6-4870-a4d5-b4e861024e03&quot;,&quot;9c714e32-ae5d-4859-ae8a-8718f30a7247&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;4a48e259-727d-4ae8-8f46-d86a90d2fd04&quot;,&quot;title&quot;:&quot;Schema validation&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/user.test.js&quot;,&quot;file&quot;:&quot;/test/models/user.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;must define \&quot;name\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Schema validation must define \&quot;name\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:198,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const namelessUser = new User({\n                email: teacherEmail,\n                password: &#x27;SuperTurvallinen&#x27;,\n                role: &#x27;teacher&#x27;\n            });\n            const error = namelessUser.validateSync();\n            expect(error).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b4d259b-bc87-457e-844b-8e4dcdd65219&quot;,&quot;parentUUID&quot;:&quot;4a48e259-727d-4ae8-8f46-d86a90d2fd04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must trim spaces from \&quot;name\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Schema validation must trim spaces from \&quot;name\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:195,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const TrimmedUser = new User({\n    name: &#x27;  Anton Aurinkoinen  &#x27;,\n    email: teacherEmail,\n    password: &#x27;SuperTurvallinen&#x27;,\n    role: &#x27;teacher&#x27;\n});\nassert.strictEqual(TrimmedUser.name, &#x27;Anton Aurinkoinen&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f44e884d-8917-4cd9-8261-0b596f16bb4a&quot;,&quot;parentUUID&quot;:&quot;4a48e259-727d-4ae8-8f46-d86a90d2fd04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must not allow \&quot;name\&quot; to have only spaces&quot;,&quot;fullTitle&quot;:&quot;User Schema validation must not allow \&quot;name\&quot; to have only spaces&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:196,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const spaceNameUser = new User({\n    name: &#x27;    &#x27;,\n    email: teacherEmail,\n    password: &#x27;SuperTurvallinen&#x27;,\n    role: &#x27;teacher&#x27;\n});\nconst error = spaceNameUser.validateSync();\nexpect(error).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;abc794e1-d56d-4ee2-85fe-02b84e341fbc&quot;,&quot;parentUUID&quot;:&quot;4a48e259-727d-4ae8-8f46-d86a90d2fd04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must require \&quot;name\&quot; to be at least one character long&quot;,&quot;fullTitle&quot;:&quot;User Schema validation must require \&quot;name\&quot; to be at least one character long&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:195,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const nameWithoutCharacters = new User({\n    name: &#x27;&#x27;,\n    email: teacherEmail,\n    password: &#x27;SuperTurvallinen&#x27;,\n    role: &#x27;teacher&#x27;\n});\nconst error = nameWithoutCharacters.validateSync();\nexpect(error).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f11cba06-359b-4506-9d8e-0b23b775f1f9&quot;,&quot;parentUUID&quot;:&quot;4a48e259-727d-4ae8-8f46-d86a90d2fd04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must not allow \&quot;name\&quot; to be longer than 50 characters&quot;,&quot;fullTitle&quot;:&quot;User Schema validation must not allow \&quot;name\&quot; to be longer than 50 characters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:203,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const longNameUser = new User({\n    name: createTestString(51),\n    email: teacherEmail,\n    password: &#x27;SuperTurvallinen&#x27;,\n    role: &#x27;teacher&#x27;\n});\nconst error = longNameUser.validateSync();\nexpect(error).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f73dc4f-1147-40ec-bdc6-9e300465a896&quot;,&quot;parentUUID&quot;:&quot;4a48e259-727d-4ae8-8f46-d86a90d2fd04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must require \&quot;email\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Schema validation must require \&quot;email\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:197,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const emaillessUser = new User({\n    name: &#x27;Leena&#x27;,\n    password: &#x27;SuperTurvallinen&#x27;,\n    role: &#x27;teacher&#x27;\n});\nconst error = emaillessUser.validateSync();\nexpect(error).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ea63617-0ea9-4a7a-bd9e-c450ae66b1d8&quot;,&quot;parentUUID&quot;:&quot;4a48e259-727d-4ae8-8f46-d86a90d2fd04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must require \&quot;email\&quot; to be valid email address&quot;,&quot;fullTitle&quot;:&quot;User Schema validation must require \&quot;email\&quot; to be valid email address&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:195,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fakeEmailUser = new User({\n    name: &#x27;Pekka&#x27;,\n    email: &#x27;hopopopo&#x27;,\n    password: &#x27;SuperTurvallinen&#x27;,\n    role: &#x27;student&#x27;\n});\nconst error = fakeEmailUser.validateSync();\nexpect(error).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d262febb-c932-4451-9cb2-c93e63e926e2&quot;,&quot;parentUUID&quot;:&quot;4a48e259-727d-4ae8-8f46-d86a90d2fd04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must require \&quot;password\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Schema validation must require \&quot;password\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const passwordlessUser = new User({\n    name: &#x27;Liinu&#x27;,\n    email: &#x27;sahkoposti@gmail.com&#x27;,\n    role: &#x27;teacher&#x27;\n});\nconst error = passwordlessUser.validateSync();\nexpect(error).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;855aafa0-71a6-4377-a0b1-422ba0166cc3&quot;,&quot;parentUUID&quot;:&quot;4a48e259-727d-4ae8-8f46-d86a90d2fd04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must not allow empty \&quot;password\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Schema validation must not allow empty \&quot;password\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const emptyPasswordUser = new User({\n    name: &#x27;Leenu&#x27;,\n    email: &#x27;posti@sahkoposti.fi&#x27;,\n    password: &#x27;&#x27;,\n    role: &#x27;admin&#x27;\n});\nconst error = emptyPasswordUser.validateSync();\nexpect(error).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9faee395-c42e-4723-ab3f-d55bdd663549&quot;,&quot;parentUUID&quot;:&quot;4a48e259-727d-4ae8-8f46-d86a90d2fd04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must hash password&quot;,&quot;fullTitle&quot;:&quot;User Schema validation must hash password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:199,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const hashedUser = new User({\n    name: &#x27;Tiinu&#x27;,\n    email: testEmail3,\n    password: &#x27;salattu&#x27;,\n    role: &#x27;student&#x27;\n});\nexpect(hashedUser.password).to.not.equal(&#x27;salattu&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14639a21-e6d6-4d7b-a6c0-84169a12cde9&quot;,&quot;parentUUID&quot;:&quot;4a48e259-727d-4ae8-8f46-d86a90d2fd04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;has an optional \&quot;role\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Schema validation has an optional \&quot;role\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:194,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const rolelessUser = new User({\n    name: &#x27;Tupu&#x27;,\n    email: testEmail3,\n    password: &#x27;salaperaisyys&#x27;\n});\nconst error = rolelessUser.validateSync();\nexpect(error).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9408398-656d-4faf-b8af-a696ee533b10&quot;,&quot;parentUUID&quot;:&quot;4a48e259-727d-4ae8-8f46-d86a90d2fd04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must set default value of \&quot;role\&quot; to student&quot;,&quot;fullTitle&quot;:&quot;User Schema validation must set default value of \&quot;role\&quot; to student&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:207,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const defaultRoleUser = new User({\n    name: &#x27;Hupu&#x27;,\n    email: testEmail3,\n    password: &#x27;salaperaisyys&#x27;\n});\nexpect(defaultRoleUser.role).to.equal(&#x27;student&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23a515c8-c5e5-483f-af2e-0ad7cbf55640&quot;,&quot;parentUUID&quot;:&quot;4a48e259-727d-4ae8-8f46-d86a90d2fd04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must allow any known \&quot;role\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Schema validation must allow any known \&quot;role\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:582,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const studentUser = new User({\n    name: &#x27;Tiinu&#x27;,\n    email: testEmail3,\n    password: &#x27;salattu&#x27;,\n    role: &#x27;student&#x27;\n});\nconst error1 = studentUser.validateSync();\nexpect(error1).to.be.undefined;\nconst teacherUser = new User({\n    name: &#x27;Tiinu&#x27;,\n    email: testEmail3,\n    password: &#x27;salattu&#x27;,\n    role: &#x27;teacher&#x27;\n});\nconst error2 = teacherUser.validateSync();\nexpect(error2).to.be.undefined;\nconst adminUser = new User({\n    name: &#x27;Tiinu&#x27;,\n    email: testEmail3,\n    password: &#x27;salattu&#x27;,\n    role: &#x27;admin&#x27;\n});\nconst error3 = adminUser.validateSync();\nexpect(error3).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;51629802-06e6-4d7c-9b71-ad3f7d5f7552&quot;,&quot;parentUUID&quot;:&quot;4a48e259-727d-4ae8-8f46-d86a90d2fd04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must trim \&quot;role\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Schema validation must trim \&quot;role\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:194,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const roleTrimUser = new User({\n    name: &#x27;Tiinu&#x27;,\n    email: testEmail3,\n    password: &#x27;salattu&#x27;,\n    role: &#x27;   admin    &#x27;\n});\nexpect(roleTrimUser.role).to.equal(&#x27;admin&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e23bc2d-d62c-43ea-8dd7-cb2f2cf1d5ff&quot;,&quot;parentUUID&quot;:&quot;4a48e259-727d-4ae8-8f46-d86a90d2fd04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must cast \&quot;role\&quot; to lowercase&quot;,&quot;fullTitle&quot;:&quot;User Schema validation must cast \&quot;role\&quot; to lowercase&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:195,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const lowerCaseUser = new User({\n    name: &#x27;Tiinu&#x27;,\n    email: testEmail3,\n    password: &#x27;salattu&#x27;,\n    role: &#x27;STUDENT&#x27;\n});\nexpect(lowerCaseUser.role).to.equal(&#x27;student&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b6e8d6c-d498-4ceb-965f-3db4ed3374d7&quot;,&quot;parentUUID&quot;:&quot;4a48e259-727d-4ae8-8f46-d86a90d2fd04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must not allow unknown \&quot;role\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Schema validation must not allow unknown \&quot;role\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:194,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const unknownUser = new User({\n    name: &#x27;HerraTuntematon&#x27;,\n    email: testEmail3,\n    password: &#x27;salattu&#x27;,\n    role: &#x27;maalari&#x27;\n});\nconst error = unknownUser.validateSync();\nexpect(error).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ce7349d-f591-4162-b008-d2138a3ec002&quot;,&quot;parentUUID&quot;:&quot;4a48e259-727d-4ae8-8f46-d86a90d2fd04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4b4d259b-bc87-457e-844b-8e4dcdd65219&quot;,&quot;f44e884d-8917-4cd9-8261-0b596f16bb4a&quot;,&quot;abc794e1-d56d-4ee2-85fe-02b84e341fbc&quot;,&quot;f11cba06-359b-4506-9d8e-0b23b775f1f9&quot;,&quot;2f73dc4f-1147-40ec-bdc6-9e300465a896&quot;,&quot;0ea63617-0ea9-4a7a-bd9e-c450ae66b1d8&quot;,&quot;d262febb-c932-4451-9cb2-c93e63e926e2&quot;,&quot;855aafa0-71a6-4377-a0b1-422ba0166cc3&quot;,&quot;9faee395-c42e-4723-ab3f-d55bdd663549&quot;,&quot;14639a21-e6d6-4d7b-a6c0-84169a12cde9&quot;,&quot;c9408398-656d-4faf-b8af-a696ee533b10&quot;,&quot;23a515c8-c5e5-483f-af2e-0ad7cbf55640&quot;,&quot;51629802-06e6-4d7c-9b71-ad3f7d5f7552&quot;,&quot;7e23bc2d-d62c-43ea-8dd7-cb2f2cf1d5ff&quot;,&quot;5b6e8d6c-d498-4ceb-965f-3db4ed3374d7&quot;,&quot;9ce7349d-f591-4162-b008-d2138a3ec002&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3146,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;33a5ef05-2e4e-43c6-8d13-440e82445fc3&quot;,&quot;title&quot;:&quot;User document&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/user.test.js&quot;,&quot;file&quot;:&quot;/test/models/user.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2887552f-7173-47c5-8ea5-ca38cdf17e3a&quot;,&quot;title&quot;:&quot;virtual getters/properties&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/user.test.js&quot;,&quot;file&quot;:&quot;/test/models/user.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;67fcccf8-197a-41ca-9df1-70a9b4cfdfd3&quot;,&quot;title&quot;:&quot;isStudent&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/user.test.js&quot;,&quot;file&quot;:&quot;/test/models/user.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;must return true when role is a student&quot;,&quot;fullTitle&quot;:&quot;User User document virtual getters/properties isStudent must return true when role is a student&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:197,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = new User({\n    name: testName,\n    email: testEmail4,\n    password: &#x27;1234567890&#x27;,\n    role: &#x27;student&#x27;\n});\nconst ret = testUser.isStudent;\nassert(ret, &#x27;must return true for a student role&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e033882f-66b3-4709-8353-11af58abc800&quot;,&quot;parentUUID&quot;:&quot;67fcccf8-197a-41ca-9df1-70a9b4cfdfd3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must return true when \&quot;role\&quot; is admin&quot;,&quot;fullTitle&quot;:&quot;User User document virtual getters/properties isStudent must return true when \&quot;role\&quot; is admin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:195,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = new User({\n    name: testName,\n    email: testEmail4,\n    password: &#x27;1234567890&#x27;,\n    role: &#x27;admin&#x27;\n});\nconst ret = testUser.isStudent;\nassert(ret, &#x27;must return true for an admin role&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b643dad-c886-4d42-bf5a-dd444a6d90d8&quot;,&quot;parentUUID&quot;:&quot;67fcccf8-197a-41ca-9df1-70a9b4cfdfd3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must return false when a role is neither student nor admin&quot;,&quot;fullTitle&quot;:&quot;User User document virtual getters/properties isStudent must return false when a role is neither student nor admin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:195,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = new User({\n    name: testName,\n    email: testEmail4,\n    password: &#x27;1234567890&#x27;,\n    role: &#x27;teacher&#x27;\n});\nconst ret = testUser.isStudent;\nassert(!ret, &#x27;must return false when a role is neither student nor admin&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc03b9b8-e3dd-40cc-87c9-7c2a39235974&quot;,&quot;parentUUID&quot;:&quot;67fcccf8-197a-41ca-9df1-70a9b4cfdfd3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e033882f-66b3-4709-8353-11af58abc800&quot;,&quot;6b643dad-c886-4d42-bf5a-dd444a6d90d8&quot;,&quot;dc03b9b8-e3dd-40cc-87c9-7c2a39235974&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:587,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;73712280-6132-4c4d-ac7a-700dcde1c0c2&quot;,&quot;title&quot;:&quot;isTeacher&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/user.test.js&quot;,&quot;file&quot;:&quot;/test/models/user.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;must return true when role is a teacher&quot;,&quot;fullTitle&quot;:&quot;User User document virtual getters/properties isTeacher must return true when role is a teacher&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:196,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = new User({\n    name: testName,\n    email: testEmail4,\n    password: &#x27;1234567890&#x27;,\n    role: &#x27;teacher&#x27;\n});\nconst ret = testUser.isTeacher;\nassert(ret, &#x27;must return true for a teacher role&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b82e55bd-cc1b-46d7-99f2-2d4595b09775&quot;,&quot;parentUUID&quot;:&quot;73712280-6132-4c4d-ac7a-700dcde1c0c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must return true when role is an admin&quot;,&quot;fullTitle&quot;:&quot;User User document virtual getters/properties isTeacher must return true when role is an admin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:195,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = new User({\n    name: testName,\n    email: testEmail4,\n    password: &#x27;1234567890&#x27;,\n    role: &#x27;admin&#x27;\n});\nconst ret = testUser.isTeacher;\nassert(ret, &#x27;must return true for an admin role&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5901d764-bac1-42b2-86e7-7caa1a2dc9de&quot;,&quot;parentUUID&quot;:&quot;73712280-6132-4c4d-ac7a-700dcde1c0c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must return false when role is neither teacher nor admin&quot;,&quot;fullTitle&quot;:&quot;User User document virtual getters/properties isTeacher must return false when role is neither teacher nor admin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:198,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = new User({\n    name: testName,\n    email: testEmail4,\n    password: &#x27;1234567890&#x27;,\n    role: &#x27;student&#x27;\n});\nconst ret = testUser.isTeacher;\nassert(!ret, &#x27;must return false when a role is neither teacher nor admin&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;407b5fbd-10ea-4836-a05a-19262beef28a&quot;,&quot;parentUUID&quot;:&quot;73712280-6132-4c4d-ac7a-700dcde1c0c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b82e55bd-cc1b-46d7-99f2-2d4595b09775&quot;,&quot;5901d764-bac1-42b2-86e7-7caa1a2dc9de&quot;,&quot;407b5fbd-10ea-4836-a05a-19262beef28a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:589,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;1553bbf0-2564-4811-bf35-7811481f4ce7&quot;,&quot;title&quot;:&quot;isAdmin&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/user.test.js&quot;,&quot;file&quot;:&quot;/test/models/user.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;must return true when role is an admin&quot;,&quot;fullTitle&quot;:&quot;User User document virtual getters/properties isAdmin must return true when role is an admin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:194,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = new User({\n    name: testName,\n    email: testEmail4,\n    password: &#x27;1234567890&#x27;,\n    role: &#x27;admin&#x27;\n});\nconst ret = testUser.isAdmin;\nassert(ret, &#x27;must return true for a teacher role&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0532297-1355-4e6b-b260-d855bc80235f&quot;,&quot;parentUUID&quot;:&quot;1553bbf0-2564-4811-bf35-7811481f4ce7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must return false when the role is not an admin&quot;,&quot;fullTitle&quot;:&quot;User User document virtual getters/properties isAdmin must return false when the role is not an admin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:193,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testUser = new User({\n    name: testName,\n    email: testEmail4,\n    password: &#x27;1234567890&#x27;,\n    role: &#x27;teacher&#x27;\n});\nconst ret = testUser.isAdmin;\nassert(!ret, &#x27;must return false when the role is not an admin&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e00891c-d005-4b01-8ccb-eafc9f01beb1&quot;,&quot;parentUUID&quot;:&quot;1553bbf0-2564-4811-bf35-7811481f4ce7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f0532297-1355-4e6b-b260-d855bc80235f&quot;,&quot;9e00891c-d005-4b01-8ccb-eafc9f01beb1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:387,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;45c74fcb-9cba-42fa-83e3-bc06637a9403&quot;,&quot;title&quot;:&quot;Password setter and hashing&quot;,&quot;fullFile&quot;:&quot;/bwa/test/models/user.test.js&quot;,&quot;file&quot;:&quot;/test/models/user.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;must hash \&quot;password\&quot; when new User is constructed&quot;,&quot;fullTitle&quot;:&quot;User User document Password setter and hashing must hash \&quot;password\&quot; when new User is constructed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:208,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const password = &#x27;1234567890&#x27;;\nconst testUser = new User({\n    name: testName,\n    email: testEmail4,\n    password: password,\n    role: &#x27;teacher&#x27;\n});\nassert(testUser.password !== password, &#x27;The password must be hashed&#x27;);\nconst filename = &#x27;models/user.js&#x27;;\nconst lines = require(&#x27;fs&#x27;).readFileSync(filename, &#x27;utf-8&#x27;).split(&#x27;\\n&#x27;).filter(Boolean);\nconst usesBcrypt = lines.some(function(line) {\n    return line.includes(&#x27;bcrypt&#x27;);\n});\nassert(usesBcrypt, &#x27;bcrypt must be used&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e60fa2a-d342-4f15-a5a3-a3738472453d&quot;,&quot;parentUUID&quot;:&quot;45c74fcb-9cba-42fa-83e3-bc06637a9403&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must hash \&quot;password\&quot; when set to a new value&quot;,&quot;fullTitle&quot;:&quot;User User document Password setter and hashing must hash \&quot;password\&quot; when set to a new value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:405,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const password = &#x27;1234567890&#x27;;\nconst testUser = new User({\n    name: testName,\n    email: testEmail4,\n    password: password,\n    role: &#x27;teacher&#x27;\n});\nconst password2 = &#x27;heippaMaailma&#x27;;\ntestUser.password = password2;\nassert(testUser.password !== password2, &#x27;The password must be hashed&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81da77ee-8971-412c-86b4-9f3bd004117f&quot;,&quot;parentUUID&quot;:&quot;45c74fcb-9cba-42fa-83e3-bc06637a9403&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must detect correct \&quot;password\&quot;&quot;,&quot;fullTitle&quot;:&quot;User User document Password setter and hashing must detect correct \&quot;password\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:391,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const password = &#x27;1234567890&#x27;;\nconst testUser = new User({\n    name: testName,\n    email: testEmail4,\n    password: password,\n    role: &#x27;teacher&#x27;\n});\nconst ret = await testUser.checkPassword(password);\nassert(ret &amp;&amp; password !== testUser.password, &#x27;must return the set password&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17d1fee8-1a56-415c-96c7-1dcf97beb35a&quot;,&quot;parentUUID&quot;:&quot;45c74fcb-9cba-42fa-83e3-bc06637a9403&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;must detect a false \&quot;password\&quot;&quot;,&quot;fullTitle&quot;:&quot;User User document Password setter and hashing must detect a false \&quot;password\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:385,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const password = &#x27;1234567890&#x27;;\nconst testUser = new User({\n    name: testName,\n    email: testEmail4,\n    password: password,\n    role: &#x27;teacher&#x27;\n});\nconst ret = await testUser.checkPassword(&#x27;simsalabim&#x27;);\nassert(!ret, &#x27;must detect a false password&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b35aace7-a255-4314-b747-3ba777be4f3b&quot;,&quot;parentUUID&quot;:&quot;45c74fcb-9cba-42fa-83e3-bc06637a9403&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3e60fa2a-d342-4f15-a5a3-a3738472453d&quot;,&quot;81da77ee-8971-412c-86b4-9f3bd004117f&quot;,&quot;17d1fee8-1a56-415c-96c7-1dcf97beb35a&quot;,&quot;b35aace7-a255-4314-b747-3ba777be4f3b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1389,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:20000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;6.2.2&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:true},&quot;version&quot;:&quot;4.1.0&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;4.0.1&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;bwa&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/bwa/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/bwa/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>